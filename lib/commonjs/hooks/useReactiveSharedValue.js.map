{"version":3,"names":["useReactiveSharedValue","value","initialValueRef","useRef","valueRef","current","makeMutable","useEffect","cancelAnimation"],"sources":["useReactiveSharedValue.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport Animated, {\n  cancelAnimation,\n  makeMutable,\n} from 'react-native-reanimated';\nimport type { Primitive } from '../types';\n\nexport const useReactiveSharedValue = <T>(\n  value: T\n): T extends Primitive ? Animated.SharedValue<T> : T => {\n  const initialValueRef = useRef<T>(null);\n  const valueRef = useRef<Animated.SharedValue<T>>(null);\n\n  if (value && typeof value === 'object' && 'value' in value) {\n    /**\n     * if provided value is a shared value,\n     * then we do not initialize another one.\n     */\n  } else if (valueRef.current === null) {\n    // @ts-ignore\n    initialValueRef.current = value;\n    /**\n     * if value is an object, then we need to\n     * pass a clone.\n     */\n    if (typeof value === 'object') {\n      // @ts-ignore\n      valueRef.current = makeMutable({ ...value });\n    } else {\n      // @ts-ignore\n      valueRef.current = makeMutable(value);\n    }\n  } else if (initialValueRef.current !== value) {\n    valueRef.current.value = value as T;\n  }\n\n  useEffect(() => {\n    return () => {\n      if (valueRef.current) {\n        cancelAnimation(valueRef.current);\n      }\n    };\n  }, []);\n\n  // @ts-ignore\n  return valueRef.current ?? value;\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AAMO,MAAMA,sBAAsB,GACjCC,KADoC,IAEkB;EACtD,MAAMC,eAAe,GAAG,IAAAC,aAAA,EAAU,IAAV,CAAxB;EACA,MAAMC,QAAQ,GAAG,IAAAD,aAAA,EAAgC,IAAhC,CAAjB;;EAEA,IAAIF,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA1B,IAAsC,WAAWA,KAArD,EAA4D;IAC1D;AACJ;AACA;AACA;EACG,CALD,MAKO,IAAIG,QAAQ,CAACC,OAAT,KAAqB,IAAzB,EAA+B;IACpC;IACAH,eAAe,CAACG,OAAhB,GAA0BJ,KAA1B;IACA;AACJ;AACA;AACA;;IACI,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;MAC7B;MACAG,QAAQ,CAACC,OAAT,GAAmB,IAAAC,kCAAA,EAAY,EAAE,GAAGL;MAAL,CAAZ,CAAnB;IACD,CAHD,MAGO;MACL;MACAG,QAAQ,CAACC,OAAT,GAAmB,IAAAC,kCAAA,EAAYL,KAAZ,CAAnB;IACD;EACF,CAdM,MAcA,IAAIC,eAAe,CAACG,OAAhB,KAA4BJ,KAAhC,EAAuC;IAC5CG,QAAQ,CAACC,OAAT,CAAiBJ,KAAjB,GAAyBA,KAAzB;EACD;;EAED,IAAAM,gBAAA,EAAU,MAAM;IACd,OAAO,MAAM;MACX,IAAIH,QAAQ,CAACC,OAAb,EAAsB;QACpB,IAAAG,sCAAA,EAAgBJ,QAAQ,CAACC,OAAzB;MACD;IACF,CAJD;EAKD,CAND,EAMG,EANH,EA3BsD,CAmCtD;;EACA,OAAOD,QAAQ,CAACC,OAAT,IAAoBJ,KAA3B;AACD,CAvCM"}