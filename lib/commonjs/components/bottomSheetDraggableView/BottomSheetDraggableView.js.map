{"version":3,"names":["BottomSheetDraggableViewComponent","nativeGestureRef","refreshControlGestureRef","style","children","rest","enableContentPanningGesture","simultaneousHandlers","_providedSimultaneousHandlers","waitFor","activeOffsetX","activeOffsetY","failOffsetX","failOffsetY","useBottomSheetInternal","contentPanGestureHandler","useBottomSheetGestureHandlers","useMemo","refs","push","Array","isArray","draggableGesture","gesture","Gesture","Pan","enabled","shouldCancelWhenOutside","runOnJS","onStart","handleOnStart","onChange","handleOnChange","onEnd","handleOnEnd","onFinalize","handleOnFinalize","requireExternalGestureToFail","simultaneousWithExternalGesture","BottomSheetDraggableView","memo","displayName"],"sources":["BottomSheetDraggableView.tsx"],"sourcesContent":["import React, { useMemo, memo } from 'react';\nimport Animated from 'react-native-reanimated';\nimport { GestureDetector, Gesture } from 'react-native-gesture-handler';\nimport {\n  useBottomSheetGestureHandlers,\n  useBottomSheetInternal,\n} from '../../hooks';\nimport type { BottomSheetDraggableViewProps } from './types';\nimport { BottomSheetDraggableContext } from '../../contexts/gesture';\n\nconst BottomSheetDraggableViewComponent = ({\n  nativeGestureRef,\n  refreshControlGestureRef,\n  style,\n  children,\n  ...rest\n}: BottomSheetDraggableViewProps) => {\n  //#region hooks\n  const {\n    enableContentPanningGesture,\n    simultaneousHandlers: _providedSimultaneousHandlers,\n    waitFor,\n    activeOffsetX,\n    activeOffsetY,\n    failOffsetX,\n    failOffsetY,\n  } = useBottomSheetInternal();\n  const { contentPanGestureHandler } = useBottomSheetGestureHandlers();\n  //#endregion\n\n  //#region variables\n  const simultaneousHandlers = useMemo(() => {\n    const refs = [];\n\n    if (nativeGestureRef) {\n      refs.push(nativeGestureRef);\n    }\n\n    if (refreshControlGestureRef) {\n      refs.push(refreshControlGestureRef);\n    }\n\n    if (_providedSimultaneousHandlers) {\n      if (Array.isArray(_providedSimultaneousHandlers)) {\n        refs.push(..._providedSimultaneousHandlers);\n      } else {\n        refs.push(_providedSimultaneousHandlers);\n      }\n    }\n\n    return refs;\n  }, [\n    _providedSimultaneousHandlers,\n    nativeGestureRef,\n    refreshControlGestureRef,\n  ]);\n  const draggableGesture = useMemo(() => {\n    let gesture = Gesture.Pan()\n      .enabled(enableContentPanningGesture)\n      .shouldCancelWhenOutside(false)\n      .runOnJS(false)\n      .onStart(contentPanGestureHandler.handleOnStart)\n      .onChange(contentPanGestureHandler.handleOnChange)\n      .onEnd(contentPanGestureHandler.handleOnEnd)\n      .onFinalize(contentPanGestureHandler.handleOnFinalize);\n\n    if (waitFor) {\n      gesture = gesture.requireExternalGestureToFail(waitFor);\n    }\n\n    if (simultaneousHandlers) {\n      gesture = gesture.simultaneousWithExternalGesture(\n        simultaneousHandlers as any\n      );\n    }\n\n    if (activeOffsetX) {\n      gesture = gesture.activeOffsetX(activeOffsetX);\n    }\n\n    if (activeOffsetY) {\n      gesture = gesture.activeOffsetY(activeOffsetY);\n    }\n\n    if (failOffsetX) {\n      gesture = gesture.failOffsetX(failOffsetX);\n    }\n\n    if (failOffsetY) {\n      gesture = gesture.failOffsetY(failOffsetY);\n    }\n\n    return gesture;\n  }, [\n    activeOffsetX,\n    activeOffsetY,\n    enableContentPanningGesture,\n    failOffsetX,\n    failOffsetY,\n    simultaneousHandlers,\n    waitFor,\n    contentPanGestureHandler.handleOnChange,\n    contentPanGestureHandler.handleOnEnd,\n    contentPanGestureHandler.handleOnFinalize,\n    contentPanGestureHandler.handleOnStart,\n  ]);\n  //#endregion\n\n  return (\n    <GestureDetector gesture={draggableGesture}>\n      <BottomSheetDraggableContext.Provider value={draggableGesture}>\n        <Animated.View style={style} {...rest}>\n          {children}\n        </Animated.View>\n      </BottomSheetDraggableContext.Provider>\n    </GestureDetector>\n  );\n};\n\nconst BottomSheetDraggableView = memo(BottomSheetDraggableViewComponent);\nBottomSheetDraggableView.displayName = 'BottomSheetDraggableView';\n\nexport default BottomSheetDraggableView;\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAKA;;;;;;;;;;AAEA,MAAMA,iCAAiC,GAAG,QAML;EAAA,IANM;IACzCC,gBADyC;IAEzCC,wBAFyC;IAGzCC,KAHyC;IAIzCC,QAJyC;IAKzC,GAAGC;EALsC,CAMN;EACnC;EACA,MAAM;IACJC,2BADI;IAEJC,oBAAoB,EAAEC,6BAFlB;IAGJC,OAHI;IAIJC,aAJI;IAKJC,aALI;IAMJC,WANI;IAOJC;EAPI,IAQF,IAAAC,6BAAA,GARJ;EASA,MAAM;IAAEC;EAAF,IAA+B,IAAAC,oCAAA,GAArC,CAXmC,CAYnC;EAEA;;EACA,MAAMT,oBAAoB,GAAG,IAAAU,cAAA,EAAQ,MAAM;IACzC,MAAMC,IAAI,GAAG,EAAb;;IAEA,IAAIjB,gBAAJ,EAAsB;MACpBiB,IAAI,CAACC,IAAL,CAAUlB,gBAAV;IACD;;IAED,IAAIC,wBAAJ,EAA8B;MAC5BgB,IAAI,CAACC,IAAL,CAAUjB,wBAAV;IACD;;IAED,IAAIM,6BAAJ,EAAmC;MACjC,IAAIY,KAAK,CAACC,OAAN,CAAcb,6BAAd,CAAJ,EAAkD;QAChDU,IAAI,CAACC,IAAL,CAAU,GAAGX,6BAAb;MACD,CAFD,MAEO;QACLU,IAAI,CAACC,IAAL,CAAUX,6BAAV;MACD;IACF;;IAED,OAAOU,IAAP;EACD,CApB4B,EAoB1B,CACDV,6BADC,EAEDP,gBAFC,EAGDC,wBAHC,CApB0B,CAA7B;EAyBA,MAAMoB,gBAAgB,GAAG,IAAAL,cAAA,EAAQ,MAAM;IACrC,IAAIM,OAAO,GAAGC,kCAAA,CAAQC,GAAR,GACXC,OADW,CACHpB,2BADG,EAEXqB,uBAFW,CAEa,KAFb,EAGXC,OAHW,CAGH,KAHG,EAIXC,OAJW,CAIHd,wBAAwB,CAACe,aAJtB,EAKXC,QALW,CAKFhB,wBAAwB,CAACiB,cALvB,EAMXC,KANW,CAMLlB,wBAAwB,CAACmB,WANpB,EAOXC,UAPW,CAOApB,wBAAwB,CAACqB,gBAPzB,CAAd;;IASA,IAAI3B,OAAJ,EAAa;MACXc,OAAO,GAAGA,OAAO,CAACc,4BAAR,CAAqC5B,OAArC,CAAV;IACD;;IAED,IAAIF,oBAAJ,EAA0B;MACxBgB,OAAO,GAAGA,OAAO,CAACe,+BAAR,CACR/B,oBADQ,CAAV;IAGD;;IAED,IAAIG,aAAJ,EAAmB;MACjBa,OAAO,GAAGA,OAAO,CAACb,aAAR,CAAsBA,aAAtB,CAAV;IACD;;IAED,IAAIC,aAAJ,EAAmB;MACjBY,OAAO,GAAGA,OAAO,CAACZ,aAAR,CAAsBA,aAAtB,CAAV;IACD;;IAED,IAAIC,WAAJ,EAAiB;MACfW,OAAO,GAAGA,OAAO,CAACX,WAAR,CAAoBA,WAApB,CAAV;IACD;;IAED,IAAIC,WAAJ,EAAiB;MACfU,OAAO,GAAGA,OAAO,CAACV,WAAR,CAAoBA,WAApB,CAAV;IACD;;IAED,OAAOU,OAAP;EACD,CArCwB,EAqCtB,CACDb,aADC,EAEDC,aAFC,EAGDL,2BAHC,EAIDM,WAJC,EAKDC,WALC,EAMDN,oBANC,EAODE,OAPC,EAQDM,wBAAwB,CAACiB,cARxB,EASDjB,wBAAwB,CAACmB,WATxB,EAUDnB,wBAAwB,CAACqB,gBAVxB,EAWDrB,wBAAwB,CAACe,aAXxB,CArCsB,CAAzB,CAxCmC,CA0FnC;;EAEA,oBACE,6BAAC,0CAAD;IAAiB,OAAO,EAAER;EAA1B,gBACE,6BAAC,oCAAD,CAA6B,QAA7B;IAAsC,KAAK,EAAEA;EAA7C,gBACE,6BAAC,8BAAD,CAAU,IAAV;IAAe,KAAK,EAAEnB;EAAtB,GAAiCE,IAAjC,GACGD,QADH,CADF,CADF,CADF;AASD,CA3GD;;AA6GA,MAAMmC,wBAAwB,gBAAG,IAAAC,WAAA,EAAKxC,iCAAL,CAAjC;AACAuC,wBAAwB,CAACE,WAAzB,GAAuC,0BAAvC;eAEeF,wB"}