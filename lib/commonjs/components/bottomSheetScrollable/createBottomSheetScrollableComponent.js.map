{"version":3,"names":["createBottomSheetScrollableComponent","type","ScrollableComponent","forwardRef","props","ref","focusHook","scrollEventsHandlersHook","enableFooterMarginAdjustment","overScrollMode","keyboardDismissMode","showsVerticalScrollIndicator","style","refreshing","onRefresh","progressViewOffset","refreshControl","onScroll","onScrollBeginDrag","onScrollEndDrag","rest","draggableGesture","useContext","BottomSheetDraggableContext","scrollableRef","scrollableContentOffsetY","scrollHandler","useScrollHandler","animatedFooterHeight","animatedScrollableState","useBottomSheetInternal","scrollableAnimatedProps","useAnimatedProps","decelerationRate","SCROLLABLE_DECELERATION_RATE_MAPPER","value","SCROLLABLE_STATE","UNLOCKED","nativeGesture","useMemo","Gesture","Native","simultaneousWithExternalGesture","shouldCancelWhenOutside","containerAnimatedStyle","useAnimatedStyle","marginBottom","containerStyle","useImperativeHandle","current","useScrollableSetter","undefined"],"sources":["createBottomSheetScrollableComponent.tsx"],"sourcesContent":["import React, {\n  forwardRef,\n  useContext,\n  useImperativeHandle,\n  useMemo,\n} from 'react';\nimport { useAnimatedProps, useAnimatedStyle } from 'react-native-reanimated';\nimport { Gesture } from 'react-native-gesture-handler';\nimport { BottomSheetDraggableContext } from '../../contexts/gesture';\nimport {\n  useScrollHandler,\n  useScrollableSetter,\n  useBottomSheetInternal,\n} from '../../hooks';\nimport {\n  SCROLLABLE_DECELERATION_RATE_MAPPER,\n  SCROLLABLE_STATE,\n  SCROLLABLE_TYPE,\n} from '../../constants';\nimport { ScrollableContainer } from './ScrollableContainer';\n\nexport function createBottomSheetScrollableComponent<T, P>(\n  type: SCROLLABLE_TYPE,\n  ScrollableComponent: any\n) {\n  return forwardRef<T, P>((props, ref) => {\n    // props\n    const {\n      // hooks\n      focusHook,\n      scrollEventsHandlersHook,\n      // props\n      enableFooterMarginAdjustment = false,\n      overScrollMode = 'never',\n      keyboardDismissMode = 'interactive',\n      showsVerticalScrollIndicator = true,\n      style,\n      refreshing,\n      onRefresh,\n      progressViewOffset,\n      refreshControl,\n      // events\n      onScroll,\n      onScrollBeginDrag,\n      onScrollEndDrag,\n      ...rest\n    }: any = props;\n\n    //#region hooks\n    const draggableGesture = useContext(BottomSheetDraggableContext);\n    const { scrollableRef, scrollableContentOffsetY, scrollHandler } =\n      useScrollHandler(\n        scrollEventsHandlersHook,\n        onScroll,\n        onScrollBeginDrag,\n        onScrollEndDrag\n      );\n    const { animatedFooterHeight, animatedScrollableState } =\n      useBottomSheetInternal();\n    //#endregion\n\n    //#region variables\n    const scrollableAnimatedProps = useAnimatedProps(\n      () => ({\n        decelerationRate:\n          SCROLLABLE_DECELERATION_RATE_MAPPER[animatedScrollableState.value],\n        showsVerticalScrollIndicator: showsVerticalScrollIndicator\n          ? animatedScrollableState.value === SCROLLABLE_STATE.UNLOCKED\n          : showsVerticalScrollIndicator,\n      }),\n      [showsVerticalScrollIndicator]\n    );\n\n    const nativeGesture = useMemo(\n      () =>\n        Gesture.Native()\n          // @ts-ignore\n          .simultaneousWithExternalGesture(draggableGesture!)\n          .shouldCancelWhenOutside(false),\n      [draggableGesture]\n    );\n    //#endregion\n\n    //#region styles\n    const containerAnimatedStyle = useAnimatedStyle(\n      () => ({\n        marginBottom: enableFooterMarginAdjustment\n          ? animatedFooterHeight.value\n          : 0,\n      }),\n      [enableFooterMarginAdjustment]\n    );\n    const containerStyle = useMemo(() => {\n      return enableFooterMarginAdjustment\n        ? [\n            ...(style ? ('length' in style ? style : [style]) : []),\n            containerAnimatedStyle,\n          ]\n        : style;\n    }, [enableFooterMarginAdjustment, style, containerAnimatedStyle]);\n    //#endregion\n\n    //#region effects\n    // @ts-ignore\n    useImperativeHandle(ref, () => scrollableRef.current);\n    useScrollableSetter(\n      scrollableRef,\n      type,\n      scrollableContentOffsetY,\n      onRefresh !== undefined,\n      focusHook\n    );\n    //#endregion\n\n    //#region render\n    return (\n      <ScrollableContainer\n        ref={scrollableRef}\n        nativeGesture={nativeGesture}\n        animatedProps={scrollableAnimatedProps}\n        overScrollMode={overScrollMode}\n        keyboardDismissMode={keyboardDismissMode}\n        refreshing={refreshing}\n        scrollEventThrottle={16}\n        progressViewOffset={progressViewOffset}\n        style={containerStyle}\n        onRefresh={onRefresh}\n        onScroll={scrollHandler}\n        ScrollableComponent={ScrollableComponent}\n        refreshControl={refreshControl}\n        {...rest}\n      />\n    );\n    //#endregion\n  });\n}\n"],"mappings":"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"}