{"version":3,"names":["BottomSheetBackdropComponent","animatedIndex","opacity","_providedOpacity","appearsOnIndex","_providedAppearsOnIndex","disappearsOnIndex","_providedDisappearsOnIndex","enableTouchThrough","_providedEnableTouchThrough","pressBehavior","DEFAULT_PRESS_BEHAVIOR","onPress","style","children","snapToIndex","close","useBottomSheet","DEFAULT_OPACITY","DEFAULT_APPEARS_ON_INDEX","DEFAULT_DISAPPEARS_ON_INDEX","DEFAULT_ENABLE_TOUCH_THROUGH","pointerEvents","setPointerEvents","useState","handleOnPress","useCallback","handleContainerTouchability","shouldDisableTouchability","gestureHandler","useAnimatedGestureHandler","onFinish","runOnJS","containerAnimatedStyle","useAnimatedStyle","interpolate","value","Extrapolate","CLAMP","flex","containerStyle","useMemo","styles","container","useAnimatedReaction","previous","BottomSheetBackdrop","memo","displayName"],"sources":["BottomSheetBackdrop.tsx"],"sourcesContent":["import React, { memo, useCallback, useMemo, useState } from 'react';\nimport { ViewProps } from 'react-native';\nimport Animated, {\n  interpolate,\n  Extrapolate,\n  useAnimatedStyle,\n  useAnimatedReaction,\n  useAnimatedGestureHandler,\n  runOnJS,\n} from 'react-native-reanimated';\nimport {\n  TapGestureHandler,\n  TapGestureHandlerGestureEvent,\n} from 'react-native-gesture-handler';\nimport { useBottomSheet } from '../../hooks';\nimport {\n  DEFAULT_OPACITY,\n  DEFAULT_APPEARS_ON_INDEX,\n  DEFAULT_DISAPPEARS_ON_INDEX,\n  DEFAULT_ENABLE_TOUCH_THROUGH,\n  DEFAULT_PRESS_BEHAVIOR,\n} from './constants';\nimport { styles } from './styles';\nimport type { BottomSheetDefaultBackdropProps } from './types';\n\nconst BottomSheetBackdropComponent = ({\n  animatedIndex,\n  opacity: _providedOpacity,\n  appearsOnIndex: _providedAppearsOnIndex,\n  disappearsOnIndex: _providedDisappearsOnIndex,\n  enableTouchThrough: _providedEnableTouchThrough,\n  pressBehavior = DEFAULT_PRESS_BEHAVIOR,\n  onPress,\n  style,\n  children,\n}: BottomSheetDefaultBackdropProps) => {\n  //#region hooks\n  const { snapToIndex, close } = useBottomSheet();\n  //#endregion\n\n  //#region defaults\n  const opacity = _providedOpacity ?? DEFAULT_OPACITY;\n  const appearsOnIndex = _providedAppearsOnIndex ?? DEFAULT_APPEARS_ON_INDEX;\n  const disappearsOnIndex =\n    _providedDisappearsOnIndex ?? DEFAULT_DISAPPEARS_ON_INDEX;\n  const enableTouchThrough =\n    _providedEnableTouchThrough ?? DEFAULT_ENABLE_TOUCH_THROUGH;\n  //#endregion\n\n  //#region variables\n  const [pointerEvents, setPointerEvents] = useState<\n    ViewProps['pointerEvents']\n  >(enableTouchThrough ? 'none' : 'auto');\n  //#endregion\n\n  //#region callbacks\n  const handleOnPress = useCallback(() => {\n    onPress?.();\n\n    if (pressBehavior === 'close') {\n      close();\n    } else if (pressBehavior === 'collapse') {\n      snapToIndex(disappearsOnIndex as number);\n    } else if (typeof pressBehavior === 'number') {\n      snapToIndex(pressBehavior);\n    }\n  }, [snapToIndex, close, disappearsOnIndex, pressBehavior, onPress]);\n  const handleContainerTouchability = useCallback(\n    (shouldDisableTouchability: boolean) => {\n      setPointerEvents(shouldDisableTouchability ? 'none' : 'auto');\n    },\n    []\n  );\n  //#endregion\n\n  //#region tap gesture\n  const gestureHandler =\n    useAnimatedGestureHandler<TapGestureHandlerGestureEvent>(\n      {\n        onFinish: () => {\n          runOnJS(handleOnPress)();\n        },\n      },\n      [handleOnPress]\n    );\n  //#endregion\n\n  //#region styles\n  const containerAnimatedStyle = useAnimatedStyle(() => ({\n    opacity: interpolate(\n      animatedIndex.value,\n      [-1, disappearsOnIndex, appearsOnIndex],\n      [0, 0, opacity],\n      Extrapolate.CLAMP\n    ),\n    flex: 1,\n  }));\n  const containerStyle = useMemo(\n    () => [styles.container, style, containerAnimatedStyle],\n    [style, containerAnimatedStyle]\n  );\n  //#endregion\n\n  //#region effects\n  useAnimatedReaction(\n    () => animatedIndex.value <= disappearsOnIndex,\n    (shouldDisableTouchability, previous) => {\n      if (shouldDisableTouchability === previous) {\n        return;\n      }\n      runOnJS(handleContainerTouchability)(shouldDisableTouchability);\n    },\n    [disappearsOnIndex]\n  );\n  //#endregion\n\n  return pressBehavior !== 'none' ? (\n    <TapGestureHandler onGestureEvent={gestureHandler}>\n      <Animated.View\n        style={containerStyle}\n        pointerEvents={pointerEvents}\n        accessible={true}\n        accessibilityRole=\"button\"\n        accessibilityLabel=\"Bottom Sheet backdrop\"\n        accessibilityHint={`Tap to ${\n          typeof pressBehavior === 'string' ? pressBehavior : 'move'\n        } the Bottom Sheet`}\n      >\n        {children}\n      </Animated.View>\n    </TapGestureHandler>\n  ) : (\n    <Animated.View pointerEvents={pointerEvents} style={containerStyle}>\n      {children}\n    </Animated.View>\n  );\n};\n\nconst BottomSheetBackdrop = memo(BottomSheetBackdropComponent);\nBottomSheetBackdrop.displayName = 'BottomSheetBackdrop';\n\nexport default BottomSheetBackdrop;\n"],"mappings":"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"}