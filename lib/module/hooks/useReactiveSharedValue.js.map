{"version":3,"names":["useEffect","useRef","cancelAnimation","makeMutable","useReactiveSharedValue","value","initialValueRef","valueRef","current"],"sources":["useReactiveSharedValue.ts"],"sourcesContent":["import { useEffect, useRef } from 'react';\nimport Animated, {\n  cancelAnimation,\n  makeMutable,\n} from 'react-native-reanimated';\nimport type { Primitive } from '../types';\n\nexport const useReactiveSharedValue = <T>(\n  value: T\n): T extends Primitive ? Animated.SharedValue<T> : T => {\n  const initialValueRef = useRef<T>(null);\n  const valueRef = useRef<Animated.SharedValue<T>>(null);\n\n  if (value && typeof value === 'object' && 'value' in value) {\n    /**\n     * if provided value is a shared value,\n     * then we do not initialize another one.\n     */\n  } else if (valueRef.current === null) {\n    // @ts-ignore\n    initialValueRef.current = value;\n    /**\n     * if value is an object, then we need to\n     * pass a clone.\n     */\n    if (typeof value === 'object') {\n      // @ts-ignore\n      valueRef.current = makeMutable({ ...value });\n    } else {\n      // @ts-ignore\n      valueRef.current = makeMutable(value);\n    }\n  } else if (initialValueRef.current !== value) {\n    valueRef.current.value = value as T;\n  }\n\n  useEffect(() => {\n    return () => {\n      if (valueRef.current) {\n        cancelAnimation(valueRef.current);\n      }\n    };\n  }, []);\n\n  // @ts-ignore\n  return valueRef.current ?? value;\n};\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;AACA,SACEC,eADF,EAEEC,WAFF,QAGO,yBAHP;AAMA,OAAO,MAAMC,sBAAsB,GACjCC,KADoC,IAEkB;EACtD,MAAMC,eAAe,GAAGL,MAAM,CAAI,IAAJ,CAA9B;EACA,MAAMM,QAAQ,GAAGN,MAAM,CAA0B,IAA1B,CAAvB;;EAEA,IAAII,KAAK,IAAI,OAAOA,KAAP,KAAiB,QAA1B,IAAsC,WAAWA,KAArD,EAA4D;IAC1D;AACJ;AACA;AACA;EACG,CALD,MAKO,IAAIE,QAAQ,CAACC,OAAT,KAAqB,IAAzB,EAA+B;IACpC;IACAF,eAAe,CAACE,OAAhB,GAA0BH,KAA1B;IACA;AACJ;AACA;AACA;;IACI,IAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;MAC7B;MACAE,QAAQ,CAACC,OAAT,GAAmBL,WAAW,CAAC,EAAE,GAAGE;MAAL,CAAD,CAA9B;IACD,CAHD,MAGO;MACL;MACAE,QAAQ,CAACC,OAAT,GAAmBL,WAAW,CAACE,KAAD,CAA9B;IACD;EACF,CAdM,MAcA,IAAIC,eAAe,CAACE,OAAhB,KAA4BH,KAAhC,EAAuC;IAC5CE,QAAQ,CAACC,OAAT,CAAiBH,KAAjB,GAAyBA,KAAzB;EACD;;EAEDL,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX,IAAIO,QAAQ,CAACC,OAAb,EAAsB;QACpBN,eAAe,CAACK,QAAQ,CAACC,OAAV,CAAf;MACD;IACF,CAJD;EAKD,CANQ,EAMN,EANM,CAAT,CA3BsD,CAmCtD;;EACA,OAAOD,QAAQ,CAACC,OAAT,IAAoBH,KAA3B;AACD,CAvCM"}