{"version":3,"names":["React","memo","useCallback","useMemo","Gesture","GestureDetector","Animated","BottomSheetHandle","useBottomSheetGestureHandlers","useBottomSheetInternal","print","styles","BottomSheetHandleContainerComponent","animatedIndex","animatedPosition","simultaneousHandlers","_internalSimultaneousHandlers","enableHandlePanningGesture","handleHeight","handleComponent","_providedHandleComponent","handleStyle","_providedHandleStyle","handleIndicatorStyle","_providedIndicatorStyle","activeOffsetX","activeOffsetY","failOffsetX","failOffsetY","waitFor","_providedSimultaneousHandlers","handlePanGestureHandler","refs","push","Array","isArray","panGesture","gesture","Pan","enabled","shouldCancelWhenOutside","runOnJS","onStart","handleOnStart","onChange","handleOnChange","onEnd","handleOnEnd","onFinalize","handleOnFinalize","requireExternalGestureToFail","simultaneousWithExternalGesture","handleContainerLayout","nativeEvent","layout","height","value","component","BottomSheetHandleContainer","displayName","method","params","HandleComponent","undefined","container"],"sources":["BottomSheetHandleContainer.tsx"],"sourcesContent":["import React, { memo, useCallback, useMemo } from 'react';\nimport type { LayoutChangeEvent } from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport Animated from 'react-native-reanimated';\nimport BottomSheetHandle from '../bottomSheetHandle';\nimport {\n  useBottomSheetGestureHandlers,\n  useBottomSheetInternal,\n} from '../../hooks';\nimport { print } from '../../utilities';\nimport { styles } from './styles';\nimport type { BottomSheetHandleContainerProps } from './types';\n\nfunction BottomSheetHandleContainerComponent({\n  animatedIndex,\n  animatedPosition,\n  simultaneousHandlers: _internalSimultaneousHandlers,\n  enableHandlePanningGesture,\n  handleHeight,\n  handleComponent: _providedHandleComponent,\n  handleStyle: _providedHandleStyle,\n  handleIndicatorStyle: _providedIndicatorStyle,\n}: BottomSheetHandleContainerProps) {\n  //#region hooks\n  const {\n    activeOffsetX,\n    activeOffsetY,\n    failOffsetX,\n    failOffsetY,\n    waitFor,\n    simultaneousHandlers: _providedSimultaneousHandlers,\n  } = useBottomSheetInternal();\n  const { handlePanGestureHandler } = useBottomSheetGestureHandlers();\n  //#endregion\n\n  //#region variables\n  const simultaneousHandlers = useMemo<any>(() => {\n    const refs = [];\n\n    if (_internalSimultaneousHandlers) {\n      refs.push(_internalSimultaneousHandlers);\n    }\n\n    if (_providedSimultaneousHandlers) {\n      if (Array.isArray(_providedSimultaneousHandlers)) {\n        refs.push(..._providedSimultaneousHandlers);\n      } else {\n        refs.push(_providedSimultaneousHandlers);\n      }\n    }\n\n    return refs;\n  }, [_providedSimultaneousHandlers, _internalSimultaneousHandlers]);\n\n  const panGesture = useMemo(() => {\n    let gesture = Gesture.Pan()\n      .enabled(enableHandlePanningGesture!)\n      .shouldCancelWhenOutside(false)\n      .runOnJS(false)\n      .onStart(handlePanGestureHandler.handleOnStart)\n      .onChange(handlePanGestureHandler.handleOnChange)\n      .onEnd(handlePanGestureHandler.handleOnEnd)\n      .onFinalize(handlePanGestureHandler.handleOnFinalize);\n\n    if (waitFor) {\n      gesture = gesture.requireExternalGestureToFail(waitFor);\n    }\n\n    if (simultaneousHandlers) {\n      gesture = gesture.simultaneousWithExternalGesture(\n        simultaneousHandlers as any\n      );\n    }\n\n    if (activeOffsetX) {\n      gesture = gesture.activeOffsetX(activeOffsetX);\n    }\n\n    if (activeOffsetY) {\n      gesture = gesture.activeOffsetY(activeOffsetY);\n    }\n\n    if (failOffsetX) {\n      gesture = gesture.failOffsetX(failOffsetX);\n    }\n\n    if (failOffsetY) {\n      gesture = gesture.failOffsetY(failOffsetY);\n    }\n\n    return gesture;\n  }, [\n    activeOffsetX,\n    activeOffsetY,\n    enableHandlePanningGesture,\n    failOffsetX,\n    failOffsetY,\n    simultaneousHandlers,\n    waitFor,\n    handlePanGestureHandler.handleOnChange,\n    handlePanGestureHandler.handleOnEnd,\n    handlePanGestureHandler.handleOnFinalize,\n    handlePanGestureHandler.handleOnStart,\n  ]);\n  //#endregion\n\n  //#region callbacks\n  const handleContainerLayout = useCallback(\n    function handleContainerLayout({\n      nativeEvent: {\n        layout: { height },\n      },\n    }: LayoutChangeEvent) {\n      handleHeight.value = height;\n\n      print({\n        component: BottomSheetHandleContainer.displayName,\n        method: 'handleContainerLayout',\n        params: {\n          height,\n        },\n      });\n    },\n    [handleHeight]\n  );\n  //#endregion\n\n  //#region renders\n  const HandleComponent =\n    _providedHandleComponent === undefined\n      ? BottomSheetHandle\n      : _providedHandleComponent;\n  return HandleComponent !== null ? (\n    <GestureDetector gesture={panGesture}>\n      <Animated.View\n        key=\"BottomSheetHandleContainer\"\n        accessible={true}\n        accessibilityRole=\"adjustable\"\n        accessibilityLabel=\"Bottom Sheet handle\"\n        accessibilityHint=\"Drag up or down to extend or minimize the Bottom Sheet\"\n        style={styles.container}\n        onLayout={handleContainerLayout}\n      >\n        <HandleComponent\n          animatedIndex={animatedIndex}\n          animatedPosition={animatedPosition}\n          style={_providedHandleStyle}\n          indicatorStyle={_providedIndicatorStyle}\n        />\n      </Animated.View>\n    </GestureDetector>\n  ) : null;\n  //#endregion\n}\n\nconst BottomSheetHandleContainer = memo(BottomSheetHandleContainerComponent);\nBottomSheetHandleContainer.displayName = 'BottomSheetHandleContainer';\n\nexport default BottomSheetHandleContainer;\n"],"mappings":"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"}