{"version":3,"names":["React","forwardRef","useContext","useImperativeHandle","useMemo","useAnimatedProps","useAnimatedStyle","Gesture","BottomSheetDraggableContext","useScrollHandler","useScrollableSetter","useBottomSheetInternal","SCROLLABLE_DECELERATION_RATE_MAPPER","SCROLLABLE_STATE","ScrollableContainer","createBottomSheetScrollableComponent","type","ScrollableComponent","props","ref","focusHook","scrollEventsHandlersHook","enableFooterMarginAdjustment","overScrollMode","keyboardDismissMode","showsVerticalScrollIndicator","style","refreshing","onRefresh","progressViewOffset","refreshControl","onScroll","onScrollBeginDrag","onScrollEndDrag","rest","draggableGesture","scrollableRef","scrollableContentOffsetY","scrollHandler","animatedFooterHeight","animatedScrollableState","scrollableAnimatedProps","decelerationRate","value","UNLOCKED","nativeGesture","Native","simultaneousWithExternalGesture","shouldCancelWhenOutside","containerAnimatedStyle","marginBottom","containerStyle","current","undefined"],"sources":["createBottomSheetScrollableComponent.tsx"],"sourcesContent":["import React, {\n  forwardRef,\n  useContext,\n  useImperativeHandle,\n  useMemo,\n} from 'react';\nimport { useAnimatedProps, useAnimatedStyle } from 'react-native-reanimated';\nimport { Gesture } from 'react-native-gesture-handler';\nimport { BottomSheetDraggableContext } from '../../contexts/gesture';\nimport {\n  useScrollHandler,\n  useScrollableSetter,\n  useBottomSheetInternal,\n} from '../../hooks';\nimport {\n  SCROLLABLE_DECELERATION_RATE_MAPPER,\n  SCROLLABLE_STATE,\n  SCROLLABLE_TYPE,\n} from '../../constants';\nimport { ScrollableContainer } from './ScrollableContainer';\n\nexport function createBottomSheetScrollableComponent<T, P>(\n  type: SCROLLABLE_TYPE,\n  ScrollableComponent: any\n) {\n  return forwardRef<T, P>((props, ref) => {\n    // props\n    const {\n      // hooks\n      focusHook,\n      scrollEventsHandlersHook,\n      // props\n      enableFooterMarginAdjustment = false,\n      overScrollMode = 'never',\n      keyboardDismissMode = 'interactive',\n      showsVerticalScrollIndicator = true,\n      style,\n      refreshing,\n      onRefresh,\n      progressViewOffset,\n      refreshControl,\n      // events\n      onScroll,\n      onScrollBeginDrag,\n      onScrollEndDrag,\n      ...rest\n    }: any = props;\n\n    //#region hooks\n    const draggableGesture = useContext(BottomSheetDraggableContext);\n    const { scrollableRef, scrollableContentOffsetY, scrollHandler } =\n      useScrollHandler(\n        scrollEventsHandlersHook,\n        onScroll,\n        onScrollBeginDrag,\n        onScrollEndDrag\n      );\n    const { animatedFooterHeight, animatedScrollableState } =\n      useBottomSheetInternal();\n    //#endregion\n\n    //#region variables\n    const scrollableAnimatedProps = useAnimatedProps(\n      () => ({\n        decelerationRate:\n          SCROLLABLE_DECELERATION_RATE_MAPPER[animatedScrollableState.value],\n        showsVerticalScrollIndicator: showsVerticalScrollIndicator\n          ? animatedScrollableState.value === SCROLLABLE_STATE.UNLOCKED\n          : showsVerticalScrollIndicator,\n      }),\n      [showsVerticalScrollIndicator]\n    );\n\n    const nativeGesture = useMemo(\n      () =>\n        Gesture.Native()\n          // @ts-ignore\n          .simultaneousWithExternalGesture(draggableGesture!)\n          .shouldCancelWhenOutside(false),\n      [draggableGesture]\n    );\n    //#endregion\n\n    //#region styles\n    const containerAnimatedStyle = useAnimatedStyle(\n      () => ({\n        marginBottom: enableFooterMarginAdjustment\n          ? animatedFooterHeight.value\n          : 0,\n      }),\n      [enableFooterMarginAdjustment]\n    );\n    const containerStyle = useMemo(() => {\n      return enableFooterMarginAdjustment\n        ? [\n            ...(style ? ('length' in style ? style : [style]) : []),\n            containerAnimatedStyle,\n          ]\n        : style;\n    }, [enableFooterMarginAdjustment, style, containerAnimatedStyle]);\n    //#endregion\n\n    //#region effects\n    // @ts-ignore\n    useImperativeHandle(ref, () => scrollableRef.current);\n    useScrollableSetter(\n      scrollableRef,\n      type,\n      scrollableContentOffsetY,\n      onRefresh !== undefined,\n      focusHook\n    );\n    //#endregion\n\n    //#region render\n    return (\n      <ScrollableContainer\n        ref={scrollableRef}\n        nativeGesture={nativeGesture}\n        animatedProps={scrollableAnimatedProps}\n        overScrollMode={overScrollMode}\n        keyboardDismissMode={keyboardDismissMode}\n        refreshing={refreshing}\n        scrollEventThrottle={16}\n        progressViewOffset={progressViewOffset}\n        style={containerStyle}\n        onRefresh={onRefresh}\n        onScroll={scrollHandler}\n        ScrollableComponent={ScrollableComponent}\n        refreshControl={refreshControl}\n        {...rest}\n      />\n    );\n    //#endregion\n  });\n}\n"],"mappings":"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"}