{"version":3,"names":["React","useMemo","memo","Animated","GestureDetector","Gesture","useBottomSheetGestureHandlers","useBottomSheetInternal","BottomSheetDraggableContext","BottomSheetDraggableViewComponent","nativeGestureRef","refreshControlGestureRef","style","children","rest","enableContentPanningGesture","simultaneousHandlers","_providedSimultaneousHandlers","waitFor","activeOffsetX","activeOffsetY","failOffsetX","failOffsetY","contentPanGestureHandler","refs","push","Array","isArray","draggableGesture","gesture","Pan","enabled","shouldCancelWhenOutside","runOnJS","onStart","handleOnStart","onChange","handleOnChange","onEnd","handleOnEnd","onFinalize","handleOnFinalize","requireExternalGestureToFail","simultaneousWithExternalGesture","BottomSheetDraggableView","displayName"],"sources":["BottomSheetDraggableView.tsx"],"sourcesContent":["import React, { useMemo, memo } from 'react';\nimport Animated from 'react-native-reanimated';\nimport { GestureDetector, Gesture } from 'react-native-gesture-handler';\nimport {\n  useBottomSheetGestureHandlers,\n  useBottomSheetInternal,\n} from '../../hooks';\nimport type { BottomSheetDraggableViewProps } from './types';\nimport { BottomSheetDraggableContext } from '../../contexts/gesture';\n\nconst BottomSheetDraggableViewComponent = ({\n  nativeGestureRef,\n  refreshControlGestureRef,\n  style,\n  children,\n  ...rest\n}: BottomSheetDraggableViewProps) => {\n  //#region hooks\n  const {\n    enableContentPanningGesture,\n    simultaneousHandlers: _providedSimultaneousHandlers,\n    waitFor,\n    activeOffsetX,\n    activeOffsetY,\n    failOffsetX,\n    failOffsetY,\n  } = useBottomSheetInternal();\n  const { contentPanGestureHandler } = useBottomSheetGestureHandlers();\n  //#endregion\n\n  //#region variables\n  const simultaneousHandlers = useMemo(() => {\n    const refs = [];\n\n    if (nativeGestureRef) {\n      refs.push(nativeGestureRef);\n    }\n\n    if (refreshControlGestureRef) {\n      refs.push(refreshControlGestureRef);\n    }\n\n    if (_providedSimultaneousHandlers) {\n      if (Array.isArray(_providedSimultaneousHandlers)) {\n        refs.push(..._providedSimultaneousHandlers);\n      } else {\n        refs.push(_providedSimultaneousHandlers);\n      }\n    }\n\n    return refs;\n  }, [\n    _providedSimultaneousHandlers,\n    nativeGestureRef,\n    refreshControlGestureRef,\n  ]);\n  const draggableGesture = useMemo(() => {\n    let gesture = Gesture.Pan()\n      .enabled(enableContentPanningGesture)\n      .shouldCancelWhenOutside(false)\n      .runOnJS(false)\n      .onStart(contentPanGestureHandler.handleOnStart)\n      .onChange(contentPanGestureHandler.handleOnChange)\n      .onEnd(contentPanGestureHandler.handleOnEnd)\n      .onFinalize(contentPanGestureHandler.handleOnFinalize);\n\n    if (waitFor) {\n      gesture = gesture.requireExternalGestureToFail(waitFor);\n    }\n\n    if (simultaneousHandlers) {\n      gesture = gesture.simultaneousWithExternalGesture(\n        simultaneousHandlers as any\n      );\n    }\n\n    if (activeOffsetX) {\n      gesture = gesture.activeOffsetX(activeOffsetX);\n    }\n\n    if (activeOffsetY) {\n      gesture = gesture.activeOffsetY(activeOffsetY);\n    }\n\n    if (failOffsetX) {\n      gesture = gesture.failOffsetX(failOffsetX);\n    }\n\n    if (failOffsetY) {\n      gesture = gesture.failOffsetY(failOffsetY);\n    }\n\n    return gesture;\n  }, [\n    activeOffsetX,\n    activeOffsetY,\n    enableContentPanningGesture,\n    failOffsetX,\n    failOffsetY,\n    simultaneousHandlers,\n    waitFor,\n    contentPanGestureHandler.handleOnChange,\n    contentPanGestureHandler.handleOnEnd,\n    contentPanGestureHandler.handleOnFinalize,\n    contentPanGestureHandler.handleOnStart,\n  ]);\n  //#endregion\n\n  return (\n    <GestureDetector gesture={draggableGesture}>\n      <BottomSheetDraggableContext.Provider value={draggableGesture}>\n        <Animated.View style={style} {...rest}>\n          {children}\n        </Animated.View>\n      </BottomSheetDraggableContext.Provider>\n    </GestureDetector>\n  );\n};\n\nconst BottomSheetDraggableView = memo(BottomSheetDraggableViewComponent);\nBottomSheetDraggableView.displayName = 'BottomSheetDraggableView';\n\nexport default BottomSheetDraggableView;\n"],"mappings":"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"}