{"version":3,"names":["React","useMemo","useCallback","forwardRef","useImperativeHandle","memo","useEffect","Platform","invariant","Animated","useAnimatedReaction","useSharedValue","useAnimatedStyle","useDerivedValue","runOnJS","interpolate","Extrapolate","runOnUI","cancelAnimation","useWorkletCallback","State","useScrollable","usePropsValidator","useReactiveSharedValue","useNormalizedSnapPoints","useKeyboard","BottomSheetInternalProvider","BottomSheetProvider","BottomSheetContainer","BottomSheetGestureHandlersProvider","BottomSheetBackdropContainer","BottomSheetHandleContainer","BottomSheetBackgroundContainer","BottomSheetFooterContainer","BottomSheetDraggableView","ANIMATION_STATE","KEYBOARD_STATE","KEYBOARD_BEHAVIOR","SHEET_STATE","SCROLLABLE_STATE","KEYBOARD_BLUR_BEHAVIOR","KEYBOARD_INPUT_MODE","ANIMATION_SOURCE","animate","getKeyboardAnimationConfigs","normalizeSnapPoint","print","DEFAULT_OVER_DRAG_RESISTANCE_FACTOR","DEFAULT_ENABLE_CONTENT_PANNING_GESTURE","DEFAULT_ENABLE_HANDLE_PANNING_GESTURE","DEFAULT_ENABLE_OVER_DRAG","DEFAULT_ANIMATE_ON_MOUNT","DEFAULT_KEYBOARD_BEHAVIOR","DEFAULT_KEYBOARD_BLUR_BEHAVIOR","DEFAULT_KEYBOARD_INPUT_MODE","INITIAL_CONTAINER_HEIGHT","INITIAL_HANDLE_HEIGHT","INITIAL_POSITION","INITIAL_SNAP_POINT","DEFAULT_ENABLE_PAN_DOWN_TO_CLOSE","INITIAL_CONTAINER_OFFSET","INITIAL_VALUE","styles","addWhitelistedUIProps","decelerationRate","BottomSheetComponent","BottomSheet","props","ref","animationConfigs","_providedAnimationConfigs","index","_providedIndex","snapPoints","_providedSnapPoints","animateOnMount","enableContentPanningGesture","enableHandlePanningGesture","enableOverDrag","enablePanDownToClose","overDragResistanceFactor","style","_providedStyle","containerStyle","_providedContainerStyle","backgroundStyle","_providedBackgroundStyle","handleStyle","_providedHandleStyle","handleIndicatorStyle","_providedHandleIndicatorStyle","gestureEventsHandlersHook","keyboardBehavior","keyboardBlurBehavior","android_keyboardInputMode","handleHeight","_providedHandleHeight","containerHeight","_providedContainerHeight","contentHeight","_providedContentHeight","containerOffset","_providedContainerOffset","topInset","bottomInset","animatedPosition","_providedAnimatedPosition","animatedIndex","_providedAnimatedIndex","simultaneousHandlers","_providedSimultaneousHandlers","waitFor","_providedWaitFor","activeOffsetX","_providedActiveOffsetX","activeOffsetY","_providedActiveOffsetY","failOffsetX","_providedFailOffsetX","failOffsetY","_providedFailOffsetY","onChange","_providedOnChange","onClose","_providedOnClose","onAnimate","_providedOnAnimate","$modal","detached","handleComponent","backdropComponent","backgroundComponent","footerComponent","children","Content","_animatedContainerHeight","animatedContainerHeight","verticalInset","value","animatedContainerOffset","animatedHandleHeight","animatedFooterHeight","animatedSnapPoints","animatedHighestSnapPoint","length","animatedClosedPosition","closedPosition","animatedSheetHeight","animatedCurrentIndex","animatedNextPosition","animatedNextPositionIndex","isAnimatedOnMount","isContentHeightFixed","isLayoutCalculated","isContainerHeightCalculated","undefined","isHandleHeightCalculated","isSnapPointsNormalized","isInTemporaryPosition","isForcedClosing","animatedContentGestureState","UNDETERMINED","animatedHandleGestureState","animatedScrollableType","animatedScrollableContentOffsetY","animatedScrollableOverrideState","isScrollableRefreshable","setScrollableRef","removeScrollableRef","state","animatedKeyboardState","height","animatedKeyboardHeight","animationDuration","keyboardAnimationDuration","animationEasing","keyboardAnimationEasing","shouldHandleKeyboardEvents","animatedKeyboardHeightInContainer","animatedAnimationState","animatedAnimationSource","MOUNT","animatedSheetState","CLOSED","extendedPosition","EXTENDED","keyboardHeightInContainer","extendedPositionWithKeyboard","Math","max","interactive","FILL_PARENT","OVER_EXTENDED","OPENED","animatedScrollableState","UNLOCKED","SHOWN","RUNNING","LOCKED","animatedContentHeight","extend","fillParent","contentWithKeyboardHeight","adjustedSnapPoints","slice","reverse","adjustedSnapPointsIndexes","map","_","push","currentIndex","CLAMP","adjustResize","KEYBOARD","SNAP_POINT_CHANGE","getNextPosition","keyboardState","highestSnapPoint","restore","HIDDEN","ACTIVE","nextPosition","handleOnChange","component","name","method","params","handleOnAnimate","toPoint","toIndex","indexOf","fromIndex","stopAnimation","NONE","STOPPED","animateToPositionCompleted","isFinished","animateToPosition","position","source","velocity","configs","currentPosition","point","onComplete","handleSnapToIndex","USER","handleSnapToPosition","handleClose","handleForceClose","handleExpand","handleCollapse","snapToIndex","snapToPosition","expand","collapse","close","forceClose","internalContextVariables","externalContextVariables","containerAnimatedStyle","opacity","OS","transform","translateY","container","contentContainerAnimatedStyle","contentContainerStyle","contentContainer","contentMaskContainerAnimatedStyle","overflow","paddingBottom","contentMaskContainerStyle","contentMaskContainer","_isLayoutCalculated","result","_previousResult","_previousSnapPoints","_previousContainerHeight","JSON","stringify","animationConfig","animationSource","CONTAINER_RESIZE","duration","_keyboardState","_keyboardHeight","_previousKeyboardState","_previousKeyboardHeight","abs","bottom","hasActiveGesture","BEGAN","none","keyboardHeight","_animatedPosition","_animatedIndex","_animationState","_contentGestureState","_handleGestureState","hasNoActiveGesture","END","CANCELLED","providedIndex","displayName"],"sources":["BottomSheet.tsx"],"sourcesContent":["import React, {\n  useMemo,\n  useCallback,\n  forwardRef,\n  useImperativeHandle,\n  memo,\n  useEffect,\n} from 'react';\nimport { Platform } from 'react-native';\nimport invariant from 'invariant';\nimport Animated, {\n  useAnimatedReaction,\n  useSharedValue,\n  useAnimatedStyle,\n  useDerivedValue,\n  runOnJS,\n  interpolate,\n  Extrapolate,\n  runOnUI,\n  cancelAnimation,\n  useWorkletCallback,\n  WithSpringConfig,\n  WithTimingConfig,\n} from 'react-native-reanimated';\nimport { State } from 'react-native-gesture-handler';\nimport {\n  useScrollable,\n  usePropsValidator,\n  useReactiveSharedValue,\n  useNormalizedSnapPoints,\n  useKeyboard,\n} from '../../hooks';\nimport {\n  BottomSheetInternalProvider,\n  BottomSheetProvider,\n} from '../../contexts';\nimport BottomSheetContainer from '../bottomSheetContainer';\nimport BottomSheetGestureHandlersProvider from '../bottomSheetGestureHandlersProvider';\nimport BottomSheetBackdropContainer from '../bottomSheetBackdropContainer';\nimport BottomSheetHandleContainer from '../bottomSheetHandleContainer';\nimport BottomSheetBackgroundContainer from '../bottomSheetBackgroundContainer';\nimport BottomSheetFooterContainer from '../bottomSheetFooterContainer/BottomSheetFooterContainer';\nimport BottomSheetDraggableView from '../bottomSheetDraggableView';\n// import BottomSheetDebugView from '../bottomSheetDebugView';\nimport {\n  ANIMATION_STATE,\n  KEYBOARD_STATE,\n  KEYBOARD_BEHAVIOR,\n  SHEET_STATE,\n  SCROLLABLE_STATE,\n  KEYBOARD_BLUR_BEHAVIOR,\n  KEYBOARD_INPUT_MODE,\n  ANIMATION_SOURCE,\n} from '../../constants';\nimport {\n  animate,\n  getKeyboardAnimationConfigs,\n  normalizeSnapPoint,\n  print,\n} from '../../utilities';\nimport {\n  DEFAULT_OVER_DRAG_RESISTANCE_FACTOR,\n  DEFAULT_ENABLE_CONTENT_PANNING_GESTURE,\n  DEFAULT_ENABLE_HANDLE_PANNING_GESTURE,\n  DEFAULT_ENABLE_OVER_DRAG,\n  DEFAULT_ANIMATE_ON_MOUNT,\n  DEFAULT_KEYBOARD_BEHAVIOR,\n  DEFAULT_KEYBOARD_BLUR_BEHAVIOR,\n  DEFAULT_KEYBOARD_INPUT_MODE,\n  INITIAL_CONTAINER_HEIGHT,\n  INITIAL_HANDLE_HEIGHT,\n  INITIAL_POSITION,\n  INITIAL_SNAP_POINT,\n  DEFAULT_ENABLE_PAN_DOWN_TO_CLOSE,\n  INITIAL_CONTAINER_OFFSET,\n  INITIAL_VALUE,\n} from './constants';\nimport type { BottomSheetMethods, Insets } from '../../types';\nimport type { BottomSheetProps, AnimateToPositionType } from './types';\nimport { styles } from './styles';\n\nAnimated.addWhitelistedUIProps({\n  decelerationRate: true,\n});\n\ntype BottomSheet = BottomSheetMethods;\n\nconst BottomSheetComponent = forwardRef<BottomSheet, BottomSheetProps>(\n  function BottomSheet(props, ref) {\n    //#region validate props\n    usePropsValidator(props);\n    //#endregion\n\n    //#region extract props\n    const {\n      // animations configurations\n      animationConfigs: _providedAnimationConfigs,\n\n      // configurations\n      index: _providedIndex = 0,\n      snapPoints: _providedSnapPoints,\n      animateOnMount = DEFAULT_ANIMATE_ON_MOUNT,\n      enableContentPanningGesture = DEFAULT_ENABLE_CONTENT_PANNING_GESTURE,\n      enableHandlePanningGesture = DEFAULT_ENABLE_HANDLE_PANNING_GESTURE,\n      enableOverDrag = DEFAULT_ENABLE_OVER_DRAG,\n      enablePanDownToClose = DEFAULT_ENABLE_PAN_DOWN_TO_CLOSE,\n      overDragResistanceFactor = DEFAULT_OVER_DRAG_RESISTANCE_FACTOR,\n\n      // styles\n      style: _providedStyle,\n      containerStyle: _providedContainerStyle,\n      backgroundStyle: _providedBackgroundStyle,\n      handleStyle: _providedHandleStyle,\n      handleIndicatorStyle: _providedHandleIndicatorStyle,\n\n      // hooks\n      gestureEventsHandlersHook,\n\n      // keyboard\n      keyboardBehavior = DEFAULT_KEYBOARD_BEHAVIOR,\n      keyboardBlurBehavior = DEFAULT_KEYBOARD_BLUR_BEHAVIOR,\n      android_keyboardInputMode = DEFAULT_KEYBOARD_INPUT_MODE,\n\n      // layout\n      handleHeight: _providedHandleHeight,\n      containerHeight: _providedContainerHeight,\n      contentHeight: _providedContentHeight,\n      containerOffset: _providedContainerOffset,\n      topInset = 0,\n      bottomInset = 0,\n\n      // animated callback shared values\n      animatedPosition: _providedAnimatedPosition,\n      animatedIndex: _providedAnimatedIndex,\n\n      // gestures\n      simultaneousHandlers: _providedSimultaneousHandlers,\n      waitFor: _providedWaitFor,\n      activeOffsetX: _providedActiveOffsetX,\n      activeOffsetY: _providedActiveOffsetY,\n      failOffsetX: _providedFailOffsetX,\n      failOffsetY: _providedFailOffsetY,\n\n      // callbacks\n      onChange: _providedOnChange,\n      onClose: _providedOnClose,\n      onAnimate: _providedOnAnimate,\n\n      // private\n      $modal = false,\n      detached = false,\n\n      // components\n      handleComponent,\n      backdropComponent,\n      backgroundComponent,\n      footerComponent,\n      children: Content,\n    } = props;\n    //#endregion\n\n    //#region layout variables\n    /**\n     * This variable is consider an internal variable,\n     * that will be used conditionally in `animatedContainerHeight`\n     */\n    const _animatedContainerHeight = useReactiveSharedValue(\n      _providedContainerHeight ?? INITIAL_CONTAINER_HEIGHT\n    );\n    /**\n     * This is a conditional variable, where if the `BottomSheet` is used\n     * in a modal, then it will subset vertical insets (top+bottom) from\n     * provided container height.\n     */\n    const animatedContainerHeight = useDerivedValue(() => {\n      const verticalInset = topInset + bottomInset;\n      return $modal\n        ? _animatedContainerHeight.value - verticalInset\n        : _animatedContainerHeight.value;\n    }, [$modal, topInset, bottomInset]);\n    const animatedContainerOffset = useReactiveSharedValue(\n      _providedContainerOffset ?? INITIAL_CONTAINER_OFFSET\n    ) as Animated.SharedValue<Insets>;\n    const animatedHandleHeight = useReactiveSharedValue(\n      _providedHandleHeight ?? INITIAL_HANDLE_HEIGHT\n    );\n    const animatedFooterHeight = useSharedValue(0);\n    const animatedSnapPoints = useNormalizedSnapPoints(\n      _providedSnapPoints,\n      animatedContainerHeight,\n      topInset,\n      bottomInset,\n      $modal\n    );\n    const animatedHighestSnapPoint = useDerivedValue(\n      () => animatedSnapPoints.value[animatedSnapPoints.value.length - 1]\n    );\n    const animatedClosedPosition = useDerivedValue(() => {\n      let closedPosition = animatedContainerHeight.value;\n\n      if ($modal || detached) {\n        closedPosition = animatedContainerHeight.value + bottomInset;\n      }\n\n      return closedPosition;\n    }, [$modal, detached, bottomInset]);\n    const animatedSheetHeight = useDerivedValue(\n      () => animatedContainerHeight.value - animatedHighestSnapPoint.value\n    );\n    const animatedCurrentIndex = useReactiveSharedValue(\n      animateOnMount ? -1 : _providedIndex\n    );\n    const animatedPosition = useSharedValue(INITIAL_POSITION);\n    const animatedNextPosition = useSharedValue(INITIAL_VALUE);\n    const animatedNextPositionIndex = useSharedValue(0);\n\n    // conditional\n    const isAnimatedOnMount = useSharedValue(false);\n    const isContentHeightFixed = useSharedValue(false);\n    const isLayoutCalculated = useDerivedValue(() => {\n      let isContainerHeightCalculated = false;\n      //container height was provided.\n      if (\n        _providedContainerHeight !== null ||\n        _providedContainerHeight !== undefined\n      ) {\n        isContainerHeightCalculated = true;\n      }\n      // container height did set.\n      if (animatedContainerHeight.value !== INITIAL_CONTAINER_HEIGHT) {\n        isContainerHeightCalculated = true;\n      }\n\n      let isHandleHeightCalculated = false;\n      // handle height is provided.\n      if (\n        _providedHandleHeight !== null &&\n        _providedHandleHeight !== undefined &&\n        typeof _providedHandleHeight === 'number'\n      ) {\n        isHandleHeightCalculated = true;\n      }\n      // handle component is null.\n      if (handleComponent === null) {\n        animatedHandleHeight.value = 0;\n        isHandleHeightCalculated = true;\n      }\n      // handle height did set.\n      if (animatedHandleHeight.value !== INITIAL_HANDLE_HEIGHT) {\n        isHandleHeightCalculated = true;\n      }\n\n      let isSnapPointsNormalized = false;\n      // the first snap point did normalized\n      if (animatedSnapPoints.value[0] !== INITIAL_SNAP_POINT) {\n        isSnapPointsNormalized = true;\n      }\n\n      return (\n        isContainerHeightCalculated &&\n        isHandleHeightCalculated &&\n        isSnapPointsNormalized\n      );\n    });\n    const isInTemporaryPosition = useSharedValue(false);\n    const isForcedClosing = useSharedValue(false);\n\n    // gesture\n    const animatedContentGestureState = useSharedValue<State>(\n      State.UNDETERMINED\n    );\n    const animatedHandleGestureState = useSharedValue<State>(\n      State.UNDETERMINED\n    );\n    //#endregion\n\n    //#region hooks variables\n    // scrollable variables\n    const {\n      animatedScrollableType,\n      animatedScrollableContentOffsetY,\n      animatedScrollableOverrideState,\n      isScrollableRefreshable,\n      setScrollableRef,\n      removeScrollableRef,\n    } = useScrollable();\n    // keyboard\n    const {\n      state: animatedKeyboardState,\n      height: animatedKeyboardHeight,\n      animationDuration: keyboardAnimationDuration,\n      animationEasing: keyboardAnimationEasing,\n      shouldHandleKeyboardEvents,\n    } = useKeyboard();\n    const animatedKeyboardHeightInContainer = useSharedValue(0);\n    //#endregion\n\n    //#region state/dynamic variables\n    // states\n    const animatedAnimationState = useSharedValue(ANIMATION_STATE.UNDETERMINED);\n    const animatedAnimationSource = useSharedValue<ANIMATION_SOURCE>(\n      ANIMATION_SOURCE.MOUNT\n    );\n    const animatedSheetState = useDerivedValue(() => {\n      // closed position = position >= container height\n      if (animatedPosition.value >= animatedClosedPosition.value)\n        return SHEET_STATE.CLOSED;\n\n      // extended position = container height - sheet height\n      const extendedPosition =\n        animatedContainerHeight.value - animatedSheetHeight.value;\n      if (animatedPosition.value === extendedPosition)\n        return SHEET_STATE.EXTENDED;\n\n      // extended position with keyboard =\n      // container height - (sheet height + keyboard height in root container)\n      const keyboardHeightInContainer = animatedKeyboardHeightInContainer.value;\n      const extendedPositionWithKeyboard = Math.max(\n        0,\n        animatedContainerHeight.value -\n          (animatedSheetHeight.value + keyboardHeightInContainer)\n      );\n\n      // detect if keyboard is open and the sheet is in temporary position\n      if (\n        keyboardBehavior === KEYBOARD_BEHAVIOR.interactive &&\n        isInTemporaryPosition.value &&\n        animatedPosition.value === extendedPositionWithKeyboard\n      ) {\n        return SHEET_STATE.EXTENDED;\n      }\n\n      // fill parent = 0\n      if (animatedPosition.value === 0) {\n        return SHEET_STATE.FILL_PARENT;\n      }\n\n      // detect if position is below extended point\n      if (animatedPosition.value < extendedPosition) {\n        return SHEET_STATE.OVER_EXTENDED;\n      }\n\n      return SHEET_STATE.OPENED;\n    }, [\n      animatedClosedPosition,\n      animatedContainerHeight,\n      animatedKeyboardHeightInContainer,\n      animatedPosition,\n      animatedSheetHeight,\n      isInTemporaryPosition,\n      keyboardBehavior,\n    ]);\n    const animatedScrollableState = useDerivedValue(() => {\n      /**\n       * if scrollable override state is set, then we just return its value.\n       */\n      if (\n        animatedScrollableOverrideState.value !== SCROLLABLE_STATE.UNDETERMINED\n      ) {\n        return animatedScrollableOverrideState.value;\n      }\n      /**\n       * if sheet state is fill parent, then unlock scrolling\n       */\n      if (animatedSheetState.value === SHEET_STATE.FILL_PARENT) {\n        return SCROLLABLE_STATE.UNLOCKED;\n      }\n\n      /**\n       * if sheet state is extended, then unlock scrolling\n       */\n      if (animatedSheetState.value === SHEET_STATE.EXTENDED) {\n        return SCROLLABLE_STATE.UNLOCKED;\n      }\n\n      /**\n       * if keyboard is shown and sheet is animating\n       * then we do not lock the scrolling to not lose\n       * current scrollable scroll position.\n       */\n      if (\n        animatedKeyboardState.value === KEYBOARD_STATE.SHOWN &&\n        animatedAnimationState.value === ANIMATION_STATE.RUNNING\n      ) {\n        return SCROLLABLE_STATE.UNLOCKED;\n      }\n\n      return SCROLLABLE_STATE.LOCKED;\n    });\n    // dynamic\n    const animatedContentHeight = useDerivedValue(() => {\n      const keyboardHeightInContainer = animatedKeyboardHeightInContainer.value;\n      const handleHeight = Math.max(0, animatedHandleHeight.value);\n      let contentHeight = animatedSheetHeight.value - handleHeight;\n\n      if (\n        keyboardBehavior === KEYBOARD_BEHAVIOR.extend &&\n        animatedKeyboardState.value === KEYBOARD_STATE.SHOWN\n      ) {\n        contentHeight = contentHeight - keyboardHeightInContainer;\n      } else if (\n        keyboardBehavior === KEYBOARD_BEHAVIOR.fillParent &&\n        isInTemporaryPosition.value\n      ) {\n        if (animatedKeyboardState.value === KEYBOARD_STATE.SHOWN) {\n          contentHeight =\n            animatedContainerHeight.value -\n            handleHeight -\n            keyboardHeightInContainer;\n        } else {\n          contentHeight = animatedContainerHeight.value - handleHeight;\n        }\n      } else if (\n        keyboardBehavior === KEYBOARD_BEHAVIOR.interactive &&\n        isInTemporaryPosition.value\n      ) {\n        const contentWithKeyboardHeight =\n          contentHeight + keyboardHeightInContainer;\n\n        if (animatedKeyboardState.value === KEYBOARD_STATE.SHOWN) {\n          if (\n            keyboardHeightInContainer + animatedSheetHeight.value >\n            animatedContainerHeight.value\n          ) {\n            contentHeight =\n              animatedContainerHeight.value -\n              keyboardHeightInContainer -\n              handleHeight;\n          }\n        } else if (\n          contentWithKeyboardHeight + handleHeight >\n          animatedContainerHeight.value\n        ) {\n          contentHeight = animatedContainerHeight.value - handleHeight;\n        } else {\n          contentHeight = contentWithKeyboardHeight;\n        }\n      }\n\n      /**\n       * before the container is measured, `contentHeight` value will be below zero,\n       * which will lead to freeze the scrollable.\n       *\n       * @link (https://github.com/gorhom/react-native-bottom-sheet/issues/470)\n       */\n      return Math.max(contentHeight, 0);\n    }, [\n      animatedContainerHeight,\n      animatedHandleHeight,\n      animatedKeyboardHeightInContainer,\n      animatedKeyboardState,\n      animatedSheetHeight,\n      isInTemporaryPosition,\n      keyboardBehavior,\n    ]);\n    const animatedIndex = useDerivedValue(() => {\n      const adjustedSnapPoints = animatedSnapPoints.value.slice().reverse();\n      const adjustedSnapPointsIndexes = animatedSnapPoints.value\n        .slice()\n        .map((_: any, index: number) => index)\n        .reverse();\n\n      /**\n       * we add the close state index `-1`\n       */\n      adjustedSnapPoints.push(animatedContainerHeight.value);\n      adjustedSnapPointsIndexes.push(-1);\n\n      const currentIndex = isLayoutCalculated.value\n        ? interpolate(\n            animatedPosition.value,\n            adjustedSnapPoints,\n            adjustedSnapPointsIndexes,\n            Extrapolate.CLAMP\n          )\n        : -1;\n\n      /**\n       * if the sheet is currently running an animation by the keyboard opening,\n       * then we clamp the index on android with resize keyboard mode.\n       */\n      if (\n        android_keyboardInputMode === KEYBOARD_INPUT_MODE.adjustResize &&\n        animatedAnimationSource.value === ANIMATION_SOURCE.KEYBOARD &&\n        animatedAnimationState.value === ANIMATION_STATE.RUNNING &&\n        isInTemporaryPosition.value\n      ) {\n        return Math.max(animatedCurrentIndex.value, currentIndex);\n      }\n\n      /**\n       * if the sheet is currently running an animation by snap point change - usually caused\n       * by dynamic content height -, then we return the next position index.\n       */\n      if (\n        animatedAnimationSource.value === ANIMATION_SOURCE.SNAP_POINT_CHANGE &&\n        animatedAnimationState.value === ANIMATION_STATE.RUNNING\n      ) {\n        return animatedNextPositionIndex.value;\n      }\n\n      return currentIndex;\n    }, [android_keyboardInputMode]);\n    //#endregion\n\n    //#region private methods\n    /**\n     * Calculate the next position based on keyboard state.\n     */\n    const getNextPosition = useWorkletCallback(\n      function getNextPosition() {\n        'worklet';\n        const currentIndex = animatedCurrentIndex.value;\n        const snapPoints = animatedSnapPoints.value;\n        const keyboardState = animatedKeyboardState.value;\n        const highestSnapPoint = animatedHighestSnapPoint.value;\n\n        /**\n         * Handle restore sheet position on blur\n         */\n        if (\n          keyboardBlurBehavior === KEYBOARD_BLUR_BEHAVIOR.restore &&\n          keyboardState === KEYBOARD_STATE.HIDDEN &&\n          animatedContentGestureState.value !== State.ACTIVE &&\n          animatedHandleGestureState.value !== State.ACTIVE\n        ) {\n          isInTemporaryPosition.value = false;\n          const nextPosition = snapPoints[currentIndex];\n          return nextPosition;\n        }\n\n        /**\n         * Handle extend behavior\n         */\n        if (\n          keyboardBehavior === KEYBOARD_BEHAVIOR.extend &&\n          keyboardState === KEYBOARD_STATE.SHOWN\n        ) {\n          return highestSnapPoint;\n        }\n\n        /**\n         * Handle full screen behavior\n         */\n        if (\n          keyboardBehavior === KEYBOARD_BEHAVIOR.fillParent &&\n          keyboardState === KEYBOARD_STATE.SHOWN\n        ) {\n          isInTemporaryPosition.value = true;\n          return 0;\n        }\n\n        /**\n         * handle interactive behavior\n         */\n        if (\n          keyboardBehavior === KEYBOARD_BEHAVIOR.interactive &&\n          keyboardState === KEYBOARD_STATE.SHOWN\n        ) {\n          isInTemporaryPosition.value = true;\n          const keyboardHeightInContainer =\n            animatedKeyboardHeightInContainer.value;\n          return Math.max(0, highestSnapPoint - keyboardHeightInContainer);\n        }\n\n        if (isInTemporaryPosition.value) {\n          return animatedPosition.value;\n        }\n\n        if (!isAnimatedOnMount.value) {\n          return snapPoints[_providedIndex];\n        }\n\n        return snapPoints[currentIndex];\n      },\n      [\n        animatedContentGestureState,\n        animatedCurrentIndex,\n        animatedHandleGestureState,\n        animatedHighestSnapPoint,\n        animatedKeyboardHeightInContainer,\n        animatedKeyboardState,\n        animatedPosition,\n        animatedSnapPoints,\n        isInTemporaryPosition,\n        isAnimatedOnMount,\n        keyboardBehavior,\n        keyboardBlurBehavior,\n        _providedIndex,\n      ]\n    );\n    const handleOnChange = useCallback(\n      function handleOnChange(index: number) {\n        print({\n          component: BottomSheet.name,\n          method: handleOnChange.name,\n          params: {\n            index,\n            animatedCurrentIndex: animatedCurrentIndex.value,\n          },\n        });\n\n        if (_providedOnChange) {\n          _providedOnChange(index);\n        }\n      },\n      [_providedOnChange, animatedCurrentIndex]\n    );\n    const handleOnAnimate = useCallback(\n      function handleOnAnimate(toPoint: number) {\n        const snapPoints = animatedSnapPoints.value;\n        const toIndex = snapPoints.indexOf(toPoint);\n\n        print({\n          component: BottomSheet.name,\n          method: handleOnAnimate.name,\n          params: {\n            toIndex,\n            fromIndex: animatedCurrentIndex.value,\n          },\n        });\n\n        if (!_providedOnAnimate) {\n          return;\n        }\n\n        if (toIndex !== animatedCurrentIndex.value) {\n          _providedOnAnimate(animatedCurrentIndex.value, toIndex);\n        }\n      },\n      [_providedOnAnimate, animatedSnapPoints, animatedCurrentIndex]\n    );\n    //#endregion\n\n    //#region animation\n    const stopAnimation = useWorkletCallback(() => {\n      cancelAnimation(animatedPosition);\n      isForcedClosing.value = false;\n      animatedAnimationSource.value = ANIMATION_SOURCE.NONE;\n      animatedAnimationState.value = ANIMATION_STATE.STOPPED;\n    }, [animatedPosition, animatedAnimationState, animatedAnimationSource]);\n    const animateToPositionCompleted = useWorkletCallback(\n      function animateToPositionCompleted(isFinished?: boolean) {\n        isForcedClosing.value = false;\n\n        if (!isFinished) {\n          return;\n        }\n        runOnJS(print)({\n          component: BottomSheet.name,\n          method: animateToPositionCompleted.name,\n          params: {\n            animatedCurrentIndex: animatedCurrentIndex.value,\n            animatedNextPosition: animatedNextPosition.value,\n            animatedNextPositionIndex: animatedNextPositionIndex.value,\n          },\n        });\n\n        animatedAnimationSource.value = ANIMATION_SOURCE.NONE;\n        animatedAnimationState.value = ANIMATION_STATE.STOPPED;\n        animatedNextPosition.value = INITIAL_VALUE;\n        animatedNextPositionIndex.value = INITIAL_VALUE;\n      }\n    );\n    const animateToPosition: AnimateToPositionType = useWorkletCallback(\n      function animateToPosition(\n        position: number,\n        source: ANIMATION_SOURCE,\n        velocity: number = 0,\n        configs?: WithTimingConfig | WithSpringConfig\n      ) {\n        if (\n          position === animatedPosition.value ||\n          position === undefined ||\n          (animatedAnimationState.value === ANIMATION_STATE.RUNNING &&\n            position === animatedNextPosition.value)\n        ) {\n          return;\n        }\n\n        runOnJS(print)({\n          component: BottomSheet.name,\n          method: animateToPosition.name,\n          params: {\n            currentPosition: animatedPosition.value,\n            position,\n            velocity,\n          },\n        });\n\n        stopAnimation();\n\n        /**\n         * set animation state to running, and source\n         */\n        animatedAnimationState.value = ANIMATION_STATE.RUNNING;\n        animatedAnimationSource.value = source;\n\n        /**\n         * store next position\n         */\n        animatedNextPosition.value = position;\n        animatedNextPositionIndex.value =\n          animatedSnapPoints.value.indexOf(position);\n\n        /**\n         * fire `onAnimate` callback\n         */\n        runOnJS(handleOnAnimate)(position);\n\n        /**\n         * force animation configs from parameters, if provided\n         */\n        if (configs !== undefined) {\n          animatedPosition.value = animate({\n            point: position,\n            configs,\n            velocity,\n            onComplete: animateToPositionCompleted,\n          });\n        } else {\n          /**\n           * use animationConfigs callback, if provided\n           */\n          animatedPosition.value = animate({\n            point: position,\n            velocity,\n            configs: _providedAnimationConfigs,\n            onComplete: animateToPositionCompleted,\n          });\n        }\n      },\n      [handleOnAnimate, _providedAnimationConfigs]\n    );\n    //#endregion\n\n    //#region public methods\n    const handleSnapToIndex = useCallback(\n      function handleSnapToIndex(\n        index: number,\n        animationConfigs?: WithSpringConfig | WithTimingConfig\n      ) {\n        const snapPoints = animatedSnapPoints.value;\n        invariant(\n          index >= -1 && index <= snapPoints.length - 1,\n          `'index' was provided but out of the provided snap points range! expected value to be between -1, ${\n            snapPoints.length - 1\n          }`\n        );\n        print({\n          component: BottomSheet.name,\n          method: handleSnapToIndex.name,\n          params: {\n            index,\n          },\n        });\n\n        const nextPosition = snapPoints[index];\n\n        /**\n         * exit method if :\n         * - layout is not calculated.\n         * - already animating to next position.\n         * - sheet is forced closing.\n         */\n        if (\n          !isLayoutCalculated.value ||\n          index === animatedNextPositionIndex.value ||\n          nextPosition === animatedNextPosition.value ||\n          isForcedClosing.value\n        ) {\n          return;\n        }\n\n        /**\n         * reset temporary position boolean.\n         */\n        isInTemporaryPosition.value = false;\n\n        runOnUI(animateToPosition)(\n          nextPosition,\n          ANIMATION_SOURCE.USER,\n          0,\n          animationConfigs\n        );\n      },\n      [\n        animateToPosition,\n        isLayoutCalculated,\n        isInTemporaryPosition,\n        isForcedClosing,\n        animatedSnapPoints,\n        animatedNextPosition,\n        animatedNextPositionIndex,\n      ]\n    );\n    const handleSnapToPosition = useWorkletCallback(\n      function handleSnapToPosition(\n        position: number | string,\n        animationConfigs?: WithSpringConfig | WithTimingConfig\n      ) {\n        print({\n          component: BottomSheet.name,\n          method: handleSnapToPosition.name,\n          params: {\n            position,\n          },\n        });\n\n        /**\n         * normalized provided position.\n         */\n        const nextPosition = normalizeSnapPoint(\n          position,\n          animatedContainerHeight.value,\n          topInset,\n          bottomInset\n        );\n\n        /**\n         * exit method if :\n         * - layout is not calculated.\n         * - already animating to next position.\n         * - sheet is forced closing.\n         */\n        if (\n          !isLayoutCalculated ||\n          nextPosition === animatedNextPosition.value ||\n          isForcedClosing.value\n        ) {\n          return;\n        }\n\n        /**\n         * mark the new position as temporary.\n         */\n        isInTemporaryPosition.value = true;\n\n        runOnUI(animateToPosition)(\n          nextPosition,\n          ANIMATION_SOURCE.USER,\n          0,\n          animationConfigs\n        );\n      },\n      [\n        animateToPosition,\n        bottomInset,\n        topInset,\n        isLayoutCalculated,\n        isForcedClosing,\n        animatedContainerHeight,\n        animatedPosition,\n      ]\n    );\n    const handleClose = useCallback(\n      function handleClose(\n        animationConfigs?: WithSpringConfig | WithTimingConfig\n      ) {\n        print({\n          component: BottomSheet.name,\n          method: handleClose.name,\n        });\n\n        const nextPosition = animatedClosedPosition.value;\n\n        /**\n         * exit method if :\n         * - layout is not calculated.\n         * - already animating to next position.\n         * - sheet is forced closing.\n         */\n        if (\n          !isLayoutCalculated.value ||\n          nextPosition === animatedNextPosition.value ||\n          isForcedClosing.value\n        ) {\n          return;\n        }\n\n        /**\n         * reset temporary position variable.\n         */\n        isInTemporaryPosition.value = false;\n\n        runOnUI(animateToPosition)(\n          nextPosition,\n          ANIMATION_SOURCE.USER,\n          0,\n          animationConfigs\n        );\n      },\n      [\n        animateToPosition,\n        isForcedClosing,\n        isLayoutCalculated,\n        isInTemporaryPosition,\n        animatedNextPosition,\n        animatedClosedPosition,\n      ]\n    );\n    const handleForceClose = useCallback(\n      function handleForceClose(\n        animationConfigs?: WithSpringConfig | WithTimingConfig\n      ) {\n        print({\n          component: BottomSheet.name,\n          method: handleForceClose.name,\n        });\n\n        const nextPosition = animatedClosedPosition.value;\n\n        /**\n         * exit method if :\n         * - already animating to next position.\n         * - sheet is forced closing.\n         */\n        if (\n          nextPosition === animatedNextPosition.value ||\n          isForcedClosing.value\n        ) {\n          return;\n        }\n\n        /**\n         * reset temporary position variable.\n         */\n        isInTemporaryPosition.value = false;\n\n        /**\n         * set force closing variable.\n         */\n        isForcedClosing.value = true;\n\n        runOnUI(animateToPosition)(\n          nextPosition,\n          ANIMATION_SOURCE.USER,\n          0,\n          animationConfigs\n        );\n      },\n      [\n        animateToPosition,\n        isForcedClosing,\n        isInTemporaryPosition,\n        animatedNextPosition,\n        animatedClosedPosition,\n      ]\n    );\n    const handleExpand = useCallback(\n      function handleExpand(\n        animationConfigs?: WithSpringConfig | WithTimingConfig\n      ) {\n        print({\n          component: BottomSheet.name,\n          method: handleExpand.name,\n        });\n\n        const snapPoints = animatedSnapPoints.value;\n        const nextPosition = snapPoints[snapPoints.length - 1];\n\n        /**\n         * exit method if :\n         * - layout is not calculated.\n         * - already animating to next position.\n         * - sheet is forced closing.\n         */\n        if (\n          !isLayoutCalculated.value ||\n          snapPoints.length - 1 === animatedNextPositionIndex.value ||\n          nextPosition === animatedNextPosition.value ||\n          isForcedClosing.value\n        ) {\n          return;\n        }\n\n        /**\n         * reset temporary position boolean.\n         */\n        isInTemporaryPosition.value = false;\n\n        runOnUI(animateToPosition)(\n          nextPosition,\n          ANIMATION_SOURCE.USER,\n          0,\n          animationConfigs\n        );\n      },\n      [\n        animateToPosition,\n        isInTemporaryPosition,\n        isLayoutCalculated,\n        isForcedClosing,\n        animatedSnapPoints,\n        animatedNextPosition,\n        animatedNextPositionIndex,\n      ]\n    );\n    const handleCollapse = useCallback(\n      function handleCollapse(\n        animationConfigs?: WithSpringConfig | WithTimingConfig\n      ) {\n        print({\n          component: BottomSheet.name,\n          method: handleCollapse.name,\n        });\n\n        const nextPosition = animatedSnapPoints.value[0];\n\n        /**\n         * exit method if :\n         * - layout is not calculated.\n         * - already animating to next position.\n         * - sheet is forced closing.\n         */\n        if (\n          !isLayoutCalculated ||\n          animatedNextPositionIndex.value === 0 ||\n          nextPosition === animatedNextPosition.value ||\n          isForcedClosing.value\n        ) {\n          return;\n        }\n\n        /**\n         * reset temporary position boolean.\n         */\n        isInTemporaryPosition.value = false;\n\n        runOnUI(animateToPosition)(\n          nextPosition,\n          ANIMATION_SOURCE.USER,\n          0,\n          animationConfigs\n        );\n      },\n      [\n        animateToPosition,\n        isForcedClosing,\n        isLayoutCalculated,\n        isInTemporaryPosition,\n        animatedSnapPoints,\n        animatedNextPosition,\n        animatedNextPositionIndex,\n      ]\n    );\n\n    useImperativeHandle(ref, () => ({\n      snapToIndex: handleSnapToIndex,\n      snapToPosition: handleSnapToPosition,\n      expand: handleExpand,\n      collapse: handleCollapse,\n      close: handleClose,\n      forceClose: handleForceClose,\n    }));\n    //#endregion\n\n    //#region contexts variables\n    const internalContextVariables = useMemo(\n      () => ({\n        enableContentPanningGesture,\n        overDragResistanceFactor,\n        enableOverDrag,\n        enablePanDownToClose,\n        animatedAnimationState,\n        animatedSheetState,\n        animatedScrollableState,\n        animatedScrollableOverrideState,\n        animatedContentGestureState,\n        animatedHandleGestureState,\n        animatedKeyboardState,\n        animatedScrollableType,\n        animatedIndex,\n        animatedPosition,\n        animatedContentHeight,\n        animatedClosedPosition,\n        animatedHandleHeight,\n        animatedFooterHeight,\n        animatedKeyboardHeight,\n        animatedKeyboardHeightInContainer,\n        animatedContainerHeight,\n        animatedSnapPoints,\n        animatedHighestSnapPoint,\n        animatedScrollableContentOffsetY,\n        isInTemporaryPosition,\n        isContentHeightFixed,\n        isScrollableRefreshable,\n        shouldHandleKeyboardEvents,\n        simultaneousHandlers: _providedSimultaneousHandlers,\n        waitFor: _providedWaitFor,\n        activeOffsetX: _providedActiveOffsetX,\n        activeOffsetY: _providedActiveOffsetY,\n        failOffsetX: _providedFailOffsetX,\n        failOffsetY: _providedFailOffsetY,\n        animateToPosition,\n        stopAnimation,\n        setScrollableRef,\n        removeScrollableRef,\n      }),\n      [\n        animatedIndex,\n        animatedPosition,\n        animatedContentHeight,\n        animatedScrollableType,\n        animatedContentGestureState,\n        animatedHandleGestureState,\n        animatedClosedPosition,\n        animatedFooterHeight,\n        animatedContainerHeight,\n        animatedHandleHeight,\n        animatedAnimationState,\n        animatedKeyboardState,\n        animatedKeyboardHeight,\n        animatedKeyboardHeightInContainer,\n        animatedSheetState,\n        animatedHighestSnapPoint,\n        animatedScrollableState,\n        animatedScrollableOverrideState,\n        animatedSnapPoints,\n        shouldHandleKeyboardEvents,\n        animatedScrollableContentOffsetY,\n        isScrollableRefreshable,\n        isContentHeightFixed,\n        isInTemporaryPosition,\n        enableContentPanningGesture,\n        overDragResistanceFactor,\n        enableOverDrag,\n        enablePanDownToClose,\n        _providedSimultaneousHandlers,\n        _providedWaitFor,\n        _providedActiveOffsetX,\n        _providedActiveOffsetY,\n        _providedFailOffsetX,\n        _providedFailOffsetY,\n        setScrollableRef,\n        removeScrollableRef,\n        animateToPosition,\n        stopAnimation,\n      ]\n    );\n    const externalContextVariables = useMemo(\n      () => ({\n        animatedIndex,\n        animatedPosition,\n        snapToIndex: handleSnapToIndex,\n        snapToPosition: handleSnapToPosition,\n        expand: handleExpand,\n        collapse: handleCollapse,\n        close: handleClose,\n        forceClose: handleForceClose,\n      }),\n      [\n        animatedIndex,\n        animatedPosition,\n        handleSnapToIndex,\n        handleSnapToPosition,\n        handleExpand,\n        handleCollapse,\n        handleClose,\n        handleForceClose,\n      ]\n    );\n    //#endregion\n\n    //#region styles\n    const containerAnimatedStyle = useAnimatedStyle(\n      () => ({\n        opacity:\n          Platform.OS === 'android' && animatedIndex.value === -1 ? 0 : 1,\n        transform: [\n          {\n            translateY: animatedPosition.value,\n          },\n        ],\n      }),\n      [animatedPosition, animatedIndex]\n    );\n    const containerStyle = useMemo(\n      () => [_providedStyle, styles.container, containerAnimatedStyle],\n      [_providedStyle, containerAnimatedStyle]\n    );\n    const contentContainerAnimatedStyle = useAnimatedStyle(() => {\n      /**\n       * if content height was provided, then we skip setting\n       * calculated height.\n       */\n      if (_providedContentHeight) {\n        return {};\n      }\n\n      return {\n        height: animate({\n          point: animatedContentHeight.value,\n          configs: _providedAnimationConfigs,\n        }),\n      };\n    }, [animatedContentHeight, _providedContentHeight]);\n    const contentContainerStyle = useMemo(\n      () => [styles.contentContainer, contentContainerAnimatedStyle],\n      [contentContainerAnimatedStyle]\n    );\n    /**\n     * added safe area to prevent the sheet from floating above\n     * the bottom of the screen, when sheet being over dragged or\n     * when the sheet is resized.\n     */\n    const contentMaskContainerAnimatedStyle = useAnimatedStyle(() => {\n      if (detached) {\n        return {\n          overflow: 'visible',\n        };\n      }\n      return {\n        paddingBottom: animatedContainerHeight.value,\n      };\n    }, [detached]);\n    const contentMaskContainerStyle = useMemo(\n      () => [styles.contentMaskContainer, contentMaskContainerAnimatedStyle],\n      [contentMaskContainerAnimatedStyle]\n    );\n    //#endregion\n\n    //#region effects\n    /**\n     * React to `isLayoutCalculated` change, to insure that the sheet will\n     * appears/mounts only when all layout is been calculated.\n     *\n     * @alias OnMount\n     */\n    useAnimatedReaction(\n      () => isLayoutCalculated.value,\n      _isLayoutCalculated => {\n        /**\n         * exit method if:\n         * - layout is not calculated yet.\n         * - already did animate on mount.\n         */\n        if (!_isLayoutCalculated || isAnimatedOnMount.value) {\n          return;\n        }\n\n        let nextPosition;\n        if (_providedIndex === -1) {\n          nextPosition = animatedClosedPosition.value;\n          animatedNextPositionIndex.value = -1;\n        } else {\n          nextPosition = getNextPosition();\n        }\n\n        runOnJS(print)({\n          component: BottomSheet.name,\n          method: 'useAnimatedReaction::OnMount',\n          params: {\n            isLayoutCalculated: _isLayoutCalculated,\n            animatedSnapPoints: animatedSnapPoints.value,\n            nextPosition,\n          },\n        });\n\n        /**\n         * here we exit method early because the next position\n         * is out of the screen, this happens when `snapPoints`\n         * still being calculated.\n         */\n        if (\n          nextPosition === INITIAL_POSITION ||\n          nextPosition === animatedClosedPosition.value\n        ) {\n          isAnimatedOnMount.value = true;\n          animatedCurrentIndex.value = _providedIndex;\n          return;\n        }\n\n        if (animateOnMount) {\n          animateToPosition(nextPosition, ANIMATION_SOURCE.MOUNT);\n        } else {\n          animatedPosition.value = nextPosition;\n        }\n        isAnimatedOnMount.value = true;\n      },\n      [_providedIndex, animateOnMount]\n    );\n\n    /**\n     * React to `snapPoints` change, to insure that the sheet position reflect\n     * to the current point correctly.\n     *\n     * @alias OnSnapPointsChange\n     */\n    useAnimatedReaction(\n      () => ({\n        snapPoints: animatedSnapPoints.value,\n        containerHeight: animatedContainerHeight.value,\n      }),\n      (result, _previousResult) => {\n        const { snapPoints, containerHeight } = result;\n        const _previousSnapPoints = _previousResult?.snapPoints;\n        const _previousContainerHeight = _previousResult?.containerHeight;\n\n        if (\n          JSON.stringify(snapPoints) === JSON.stringify(_previousSnapPoints) ||\n          !isLayoutCalculated.value ||\n          !isAnimatedOnMount.value ||\n          containerHeight <= 0\n        ) {\n          return;\n        }\n\n        runOnJS(print)({\n          component: BottomSheet.name,\n          method: 'useAnimatedReaction::OnSnapPointChange',\n          params: {\n            snapPoints,\n          },\n        });\n\n        let nextPosition;\n        let animationConfig;\n        let animationSource = ANIMATION_SOURCE.SNAP_POINT_CHANGE;\n\n        /**\n         * if snap points changed while sheet is animating, then\n         * we stop the animation and animate to the updated point.\n         */\n        if (\n          animatedAnimationState.value === ANIMATION_STATE.RUNNING &&\n          animatedNextPositionIndex.value !== animatedCurrentIndex.value\n        ) {\n          nextPosition =\n            animatedNextPositionIndex.value !== -1\n              ? snapPoints[animatedNextPositionIndex.value]\n              : animatedNextPosition.value;\n        } else if (animatedCurrentIndex.value === -1) {\n          nextPosition = animatedClosedPosition.value;\n        } else if (isInTemporaryPosition.value) {\n          nextPosition = getNextPosition();\n        } else {\n          nextPosition = snapPoints[animatedCurrentIndex.value];\n\n          /**\n           * if snap points changes because of the container height change,\n           * then we skip the snap animation by setting the duration to 0.\n           */\n          if (containerHeight !== _previousContainerHeight) {\n            animationSource = ANIMATION_SOURCE.CONTAINER_RESIZE;\n            animationConfig = {\n              duration: 0,\n            };\n          }\n        }\n        animateToPosition(nextPosition, animationSource, 0, animationConfig);\n      }\n    );\n\n    /**\n     * React to keyboard appearance state.\n     *\n     * @alias OnKeyboardStateChange\n     */\n    useAnimatedReaction(\n      () => ({\n        _keyboardState: animatedKeyboardState.value,\n        _keyboardHeight: animatedKeyboardHeight.value,\n      }),\n      (result, _previousResult) => {\n        const { _keyboardState, _keyboardHeight } = result;\n        const _previousKeyboardState = _previousResult?._keyboardState;\n        const _previousKeyboardHeight = _previousResult?._keyboardHeight;\n\n        /**\n         * Calculate the keyboard height in the container.\n         */\n        animatedKeyboardHeightInContainer.value = $modal\n          ? Math.abs(\n              _keyboardHeight -\n                Math.abs(bottomInset - animatedContainerOffset.value.bottom)\n            )\n          : Math.abs(_keyboardHeight - animatedContainerOffset.value.bottom);\n\n        /**\n         * if keyboard state is equal to the previous state, then exit the method\n         */\n        if (\n          _keyboardState === _previousKeyboardState &&\n          _keyboardHeight === _previousKeyboardHeight\n        ) {\n          return;\n        }\n\n        /**\n         * if user is interacting with sheet, then exit the method\n         */\n        const hasActiveGesture =\n          animatedContentGestureState.value === State.ACTIVE ||\n          animatedContentGestureState.value === State.BEGAN ||\n          animatedHandleGestureState.value === State.ACTIVE ||\n          animatedHandleGestureState.value === State.BEGAN;\n        if (hasActiveGesture) {\n          return;\n        }\n\n        /**\n         * if sheet not animated on mount yet, then exit the method\n         */\n        if (!isAnimatedOnMount.value) {\n          return;\n        }\n\n        /**\n         * if new keyboard state is hidden and blur behavior is none, then exit the method\n         */\n        if (\n          _keyboardState === KEYBOARD_STATE.HIDDEN &&\n          keyboardBlurBehavior === KEYBOARD_BLUR_BEHAVIOR.none\n        ) {\n          return;\n        }\n\n        /**\n         * if platform is android and the input mode is resize, then exit the method\n         */\n        if (\n          Platform.OS === 'android' &&\n          keyboardBehavior === KEYBOARD_BEHAVIOR.interactive &&\n          android_keyboardInputMode === KEYBOARD_INPUT_MODE.adjustResize\n        ) {\n          animatedKeyboardHeightInContainer.value = 0;\n          return;\n        }\n\n        runOnJS(print)({\n          component: BottomSheet.name,\n          method: 'useAnimatedReaction::OnKeyboardStateChange',\n          params: {\n            keyboardState: _keyboardState,\n            keyboardHeight: _keyboardHeight,\n          },\n        });\n\n        let animationConfigs = getKeyboardAnimationConfigs(\n          keyboardAnimationEasing.value,\n          keyboardAnimationDuration.value\n        );\n        const nextPosition = getNextPosition();\n        animateToPosition(\n          nextPosition,\n          ANIMATION_SOURCE.KEYBOARD,\n          0,\n          animationConfigs\n        );\n      },\n      [\n        $modal,\n        bottomInset,\n        keyboardBehavior,\n        keyboardBlurBehavior,\n        android_keyboardInputMode,\n        animatedContainerOffset,\n        getNextPosition,\n      ]\n    );\n\n    /**\n     * sets provided animated position\n     */\n    useAnimatedReaction(\n      () => animatedPosition.value,\n      _animatedPosition => {\n        if (_providedAnimatedPosition) {\n          _providedAnimatedPosition.value = _animatedPosition + topInset;\n        }\n      }\n    );\n\n    /**\n     * sets provided animated index\n     */\n    useAnimatedReaction(\n      () => animatedIndex.value,\n      _animatedIndex => {\n        if (_providedAnimatedIndex) {\n          _providedAnimatedIndex.value = _animatedIndex;\n        }\n      }\n    );\n\n    /**\n     * React to internal variables to detect change in snap position.\n     *\n     * @alias OnChange\n     */\n    useAnimatedReaction(\n      () => ({\n        _animatedIndex: animatedIndex.value,\n        _animatedPosition: animatedPosition.value,\n        _animationState: animatedAnimationState.value,\n        _contentGestureState: animatedContentGestureState.value,\n        _handleGestureState: animatedHandleGestureState.value,\n      }),\n      ({\n        _animatedIndex,\n        _animationState,\n        _contentGestureState,\n        _handleGestureState,\n      }) => {\n        /**\n         * exit the method if animation state is not stopped.\n         */\n        if (_animationState !== ANIMATION_STATE.STOPPED) {\n          return;\n        }\n\n        /**\n         * exit the method if animated index value\n         * has fraction, e.g. 1.99, 0.52\n         */\n        if (_animatedIndex % 1 !== 0) {\n          return;\n        }\n\n        /**\n         * exit the method if there any active gesture.\n         */\n        const hasNoActiveGesture =\n          (_contentGestureState === State.END ||\n            _contentGestureState === State.UNDETERMINED ||\n            _contentGestureState === State.CANCELLED) &&\n          (_handleGestureState === State.END ||\n            _handleGestureState === State.UNDETERMINED ||\n            _handleGestureState === State.CANCELLED);\n        if (!hasNoActiveGesture) {\n          return;\n        }\n\n        /**\n         * if the index is not equal to the current index,\n         * than the sheet position had changed and we trigger\n         * the `onChange` callback.\n         */\n        if (_animatedIndex !== animatedCurrentIndex.value) {\n          runOnJS(print)({\n            component: BottomSheet.name,\n            method: 'useAnimatedReaction::OnChange',\n            params: {\n              animatedCurrentIndex: animatedCurrentIndex.value,\n              animatedIndex: _animatedIndex,\n            },\n          });\n\n          animatedCurrentIndex.value = _animatedIndex;\n          runOnJS(handleOnChange)(_animatedIndex);\n        }\n\n        /**\n         * if index is `-1` than we fire the `onClose` callback.\n         */\n        if (_animatedIndex === -1 && _providedOnClose) {\n          runOnJS(print)({\n            component: BottomSheet.name,\n            method: 'useAnimatedReaction::onClose',\n            params: {\n              animatedCurrentIndex: animatedCurrentIndex.value,\n              animatedIndex: _animatedIndex,\n            },\n          });\n          runOnJS(_providedOnClose)();\n        }\n      },\n      [handleOnChange, _providedOnClose]\n    );\n\n    /**\n     * React to `index` prop to snap the sheet to the new position.\n     *\n     * @alias onIndexChange\n     */\n    useEffect(() => {\n      if (isAnimatedOnMount.value) {\n        handleSnapToIndex(_providedIndex);\n      }\n    }, [\n      _providedIndex,\n      animatedCurrentIndex,\n      isAnimatedOnMount,\n      handleSnapToIndex,\n    ]);\n    //#endregion\n\n    // render\n    print({\n      component: BottomSheet.name,\n      method: 'render',\n      params: {\n        animatedSnapPoints: animatedSnapPoints.value,\n        animatedCurrentIndex: animatedCurrentIndex.value,\n        providedIndex: _providedIndex,\n      },\n    });\n    return (\n      <BottomSheetProvider value={externalContextVariables}>\n        <BottomSheetInternalProvider value={internalContextVariables}>\n          <BottomSheetGestureHandlersProvider\n            gestureEventsHandlersHook={gestureEventsHandlersHook}\n          >\n            <BottomSheetBackdropContainer\n              key=\"BottomSheetBackdropContainer\"\n              animatedIndex={animatedIndex}\n              animatedPosition={animatedPosition}\n              backdropComponent={backdropComponent}\n            />\n            <BottomSheetContainer\n              key=\"BottomSheetContainer\"\n              shouldCalculateHeight={!$modal}\n              containerHeight={_animatedContainerHeight}\n              containerOffset={animatedContainerOffset}\n              topInset={topInset}\n              bottomInset={bottomInset}\n              detached={detached}\n              style={_providedContainerStyle}\n            >\n              <Animated.View style={containerStyle}>\n                <BottomSheetBackgroundContainer\n                  key=\"BottomSheetBackgroundContainer\"\n                  animatedIndex={animatedIndex}\n                  animatedPosition={animatedPosition}\n                  backgroundComponent={backgroundComponent}\n                  backgroundStyle={_providedBackgroundStyle}\n                />\n                <Animated.View\n                  pointerEvents=\"box-none\"\n                  style={contentMaskContainerStyle}\n                >\n                  <BottomSheetDraggableView\n                    key=\"BottomSheetRootDraggableView\"\n                    style={contentContainerStyle}\n                  >\n                    {typeof Content === 'function' ? <Content /> : Content}\n\n                    {footerComponent && (\n                      <BottomSheetFooterContainer\n                        footerComponent={footerComponent}\n                      />\n                    )}\n                  </BottomSheetDraggableView>\n                </Animated.View>\n                <BottomSheetHandleContainer\n                  key=\"BottomSheetHandleContainer\"\n                  animatedIndex={animatedIndex}\n                  animatedPosition={animatedPosition}\n                  handleHeight={animatedHandleHeight}\n                  enableHandlePanningGesture={enableHandlePanningGesture}\n                  enableOverDrag={enableOverDrag}\n                  enablePanDownToClose={enablePanDownToClose}\n                  overDragResistanceFactor={overDragResistanceFactor}\n                  keyboardBehavior={keyboardBehavior}\n                  handleComponent={handleComponent}\n                  handleStyle={_providedHandleStyle}\n                  handleIndicatorStyle={_providedHandleIndicatorStyle}\n                />\n              </Animated.View>\n              {/* <BottomSheetDebugView\n                values={{\n                  // topInset,\n                  // bottomInset,\n                  animatedSheetState,\n                  // animatedScrollableState,\n                  // animatedScrollableOverrideState,\n                  // isScrollableRefreshable,\n                  // animatedScrollableContentOffsetY,\n                  // keyboardState,\n                  animatedIndex,\n                  animatedCurrentIndex,\n                  animatedPosition,\n                  animatedHandleGestureState,\n                  animatedContentGestureState,\n                  // animatedContainerHeight,\n                  // animatedSheetHeight,\n                  // animatedHandleHeight,\n                  // animatedContentHeight,\n                  // // keyboardHeight,\n                  // isLayoutCalculated,\n                  // isContentHeightFixed,\n                  // isInTemporaryPosition,\n                }}\n              /> */}\n            </BottomSheetContainer>\n          </BottomSheetGestureHandlersProvider>\n        </BottomSheetInternalProvider>\n      </BottomSheetProvider>\n    );\n  }\n);\n\nconst BottomSheet = memo(BottomSheetComponent);\nBottomSheet.displayName = 'BottomSheet';\n\nexport default BottomSheet;\n"],"mappings":"AAAA,OAAOA,KAAP,IACEC,OADF,EAEEC,WAFF,EAGEC,UAHF,EAIEC,mBAJF,EAKEC,IALF,EAMEC,SANF,QAOO,OAPP;AAQA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,QAAP,IACEC,mBADF,EAEEC,cAFF,EAGEC,gBAHF,EAIEC,eAJF,EAKEC,OALF,EAMEC,WANF,EAOEC,WAPF,EAQEC,OARF,EASEC,eATF,EAUEC,kBAVF,QAaO,yBAbP;AAcA,SAASC,KAAT,QAAsB,8BAAtB;AACA,SACEC,aADF,EAEEC,iBAFF,EAGEC,sBAHF,EAIEC,uBAJF,EAKEC,WALF,QAMO,aANP;AAOA,SACEC,2BADF,EAEEC,mBAFF,QAGO,gBAHP;AAIA,OAAOC,oBAAP,MAAiC,yBAAjC;AACA,OAAOC,kCAAP,MAA+C,uCAA/C;AACA,OAAOC,4BAAP,MAAyC,iCAAzC;AACA,OAAOC,0BAAP,MAAuC,+BAAvC;AACA,OAAOC,8BAAP,MAA2C,mCAA3C;AACA,OAAOC,0BAAP,MAAuC,0DAAvC;AACA,OAAOC,wBAAP,MAAqC,6BAArC,C,CACA;;AACA,SACEC,eADF,EAEEC,cAFF,EAGEC,iBAHF,EAIEC,WAJF,EAKEC,gBALF,EAMEC,sBANF,EAOEC,mBAPF,EAQEC,gBARF,QASO,iBATP;AAUA,SACEC,OADF,EAEEC,2BAFF,EAGEC,kBAHF,EAIEC,KAJF,QAKO,iBALP;AAMA,SACEC,mCADF,EAEEC,sCAFF,EAGEC,qCAHF,EAIEC,wBAJF,EAKEC,wBALF,EAMEC,yBANF,EAOEC,8BAPF,EAQEC,2BARF,EASEC,wBATF,EAUEC,qBAVF,EAWEC,gBAXF,EAYEC,kBAZF,EAaEC,gCAbF,EAcEC,wBAdF,EAeEC,aAfF,QAgBO,aAhBP;AAmBA,SAASC,MAAT,QAAuB,UAAvB;AAEArD,QAAQ,CAACsD,qBAAT,CAA+B;EAC7BC,gBAAgB,EAAE;AADW,CAA/B;AAMA,MAAMC,oBAAoB,gBAAG9D,UAAU,CACrC,SAAS+D,WAAT,CAAqBC,KAArB,EAA4BC,GAA5B,EAAiC;EAC/B;EACA9C,iBAAiB,CAAC6C,KAAD,CAAjB,CAF+B,CAG/B;EAEA;;EACA,MAAM;IACJ;IACAE,gBAAgB,EAAEC,yBAFd;IAIJ;IACAC,KAAK,EAAEC,cAAc,GAAG,CALpB;IAMJC,UAAU,EAAEC,mBANR;IAOJC,cAAc,GAAGxB,wBAPb;IAQJyB,2BAA2B,GAAG5B,sCAR1B;IASJ6B,0BAA0B,GAAG5B,qCATzB;IAUJ6B,cAAc,GAAG5B,wBAVb;IAWJ6B,oBAAoB,GAAGpB,gCAXnB;IAYJqB,wBAAwB,GAAGjC,mCAZvB;IAcJ;IACAkC,KAAK,EAAEC,cAfH;IAgBJC,cAAc,EAAEC,uBAhBZ;IAiBJC,eAAe,EAAEC,wBAjBb;IAkBJC,WAAW,EAAEC,oBAlBT;IAmBJC,oBAAoB,EAAEC,6BAnBlB;IAqBJ;IACAC,yBAtBI;IAwBJ;IACAC,gBAAgB,GAAGxC,yBAzBf;IA0BJyC,oBAAoB,GAAGxC,8BA1BnB;IA2BJyC,yBAAyB,GAAGxC,2BA3BxB;IA6BJ;IACAyC,YAAY,EAAEC,qBA9BV;IA+BJC,eAAe,EAAEC,wBA/Bb;IAgCJC,aAAa,EAAEC,sBAhCX;IAiCJC,eAAe,EAAEC,wBAjCb;IAkCJC,QAAQ,GAAG,CAlCP;IAmCJC,WAAW,GAAG,CAnCV;IAqCJ;IACAC,gBAAgB,EAAEC,yBAtCd;IAuCJC,aAAa,EAAEC,sBAvCX;IAyCJ;IACAC,oBAAoB,EAAEC,6BA1ClB;IA2CJC,OAAO,EAAEC,gBA3CL;IA4CJC,aAAa,EAAEC,sBA5CX;IA6CJC,aAAa,EAAEC,sBA7CX;IA8CJC,WAAW,EAAEC,oBA9CT;IA+CJC,WAAW,EAAEC,oBA/CT;IAiDJ;IACAC,QAAQ,EAAEC,iBAlDN;IAmDJC,OAAO,EAAEC,gBAnDL;IAoDJC,SAAS,EAAEC,kBApDP;IAsDJ;IACAC,MAAM,GAAG,KAvDL;IAwDJC,QAAQ,GAAG,KAxDP;IA0DJ;IACAC,eA3DI;IA4DJC,iBA5DI;IA6DJC,mBA7DI;IA8DJC,eA9DI;IA+DJC,QAAQ,EAAEC;EA/DN,IAgEFnE,KAhEJ,CAN+B,CAuE/B;EAEA;;EACA;AACJ;AACA;AACA;;EACI,MAAMoE,wBAAwB,GAAGhH,sBAAsB,CACrD2E,wBAAwB,IAAI3C,wBADyB,CAAvD;EAGA;AACJ;AACA;AACA;AACA;;;EACI,MAAMiF,uBAAuB,GAAG3H,eAAe,CAAC,MAAM;IACpD,MAAM4H,aAAa,GAAGlC,QAAQ,GAAGC,WAAjC;IACA,OAAOuB,MAAM,GACTQ,wBAAwB,CAACG,KAAzB,GAAiCD,aADxB,GAETF,wBAAwB,CAACG,KAF7B;EAGD,CAL8C,EAK5C,CAACX,MAAD,EAASxB,QAAT,EAAmBC,WAAnB,CAL4C,CAA/C;EAMA,MAAMmC,uBAAuB,GAAGpH,sBAAsB,CACpD+E,wBAAwB,IAAI1C,wBADwB,CAAtD;EAGA,MAAMgF,oBAAoB,GAAGrH,sBAAsB,CACjDyE,qBAAqB,IAAIxC,qBADwB,CAAnD;EAGA,MAAMqF,oBAAoB,GAAGlI,cAAc,CAAC,CAAD,CAA3C;EACA,MAAMmI,kBAAkB,GAAGtH,uBAAuB,CAChDkD,mBADgD,EAEhD8D,uBAFgD,EAGhDjC,QAHgD,EAIhDC,WAJgD,EAKhDuB,MALgD,CAAlD;EAOA,MAAMgB,wBAAwB,GAAGlI,eAAe,CAC9C,MAAMiI,kBAAkB,CAACJ,KAAnB,CAAyBI,kBAAkB,CAACJ,KAAnB,CAAyBM,MAAzB,GAAkC,CAA3D,CADwC,CAAhD;EAGA,MAAMC,sBAAsB,GAAGpI,eAAe,CAAC,MAAM;IACnD,IAAIqI,cAAc,GAAGV,uBAAuB,CAACE,KAA7C;;IAEA,IAAIX,MAAM,IAAIC,QAAd,EAAwB;MACtBkB,cAAc,GAAGV,uBAAuB,CAACE,KAAxB,GAAgClC,WAAjD;IACD;;IAED,OAAO0C,cAAP;EACD,CAR6C,EAQ3C,CAACnB,MAAD,EAASC,QAAT,EAAmBxB,WAAnB,CAR2C,CAA9C;EASA,MAAM2C,mBAAmB,GAAGtI,eAAe,CACzC,MAAM2H,uBAAuB,CAACE,KAAxB,GAAgCK,wBAAwB,CAACL,KADtB,CAA3C;EAGA,MAAMU,oBAAoB,GAAG7H,sBAAsB,CACjDoD,cAAc,GAAG,CAAC,CAAJ,GAAQH,cAD2B,CAAnD;EAGA,MAAMiC,gBAAgB,GAAG9F,cAAc,CAAC8C,gBAAD,CAAvC;EACA,MAAM4F,oBAAoB,GAAG1I,cAAc,CAACkD,aAAD,CAA3C;EACA,MAAMyF,yBAAyB,GAAG3I,cAAc,CAAC,CAAD,CAAhD,CA9H+B,CAgI/B;;EACA,MAAM4I,iBAAiB,GAAG5I,cAAc,CAAC,KAAD,CAAxC;EACA,MAAM6I,oBAAoB,GAAG7I,cAAc,CAAC,KAAD,CAA3C;EACA,MAAM8I,kBAAkB,GAAG5I,eAAe,CAAC,MAAM;IAC/C,IAAI6I,2BAA2B,GAAG,KAAlC,CAD+C,CAE/C;;IACA,IACExD,wBAAwB,KAAK,IAA7B,IACAA,wBAAwB,KAAKyD,SAF/B,EAGE;MACAD,2BAA2B,GAAG,IAA9B;IACD,CAR8C,CAS/C;;;IACA,IAAIlB,uBAAuB,CAACE,KAAxB,KAAkCnF,wBAAtC,EAAgE;MAC9DmG,2BAA2B,GAAG,IAA9B;IACD;;IAED,IAAIE,wBAAwB,GAAG,KAA/B,CAd+C,CAe/C;;IACA,IACE5D,qBAAqB,KAAK,IAA1B,IACAA,qBAAqB,KAAK2D,SAD1B,IAEA,OAAO3D,qBAAP,KAAiC,QAHnC,EAIE;MACA4D,wBAAwB,GAAG,IAA3B;IACD,CAtB8C,CAuB/C;;;IACA,IAAI3B,eAAe,KAAK,IAAxB,EAA8B;MAC5BW,oBAAoB,CAACF,KAArB,GAA6B,CAA7B;MACAkB,wBAAwB,GAAG,IAA3B;IACD,CA3B8C,CA4B/C;;;IACA,IAAIhB,oBAAoB,CAACF,KAArB,KAA+BlF,qBAAnC,EAA0D;MACxDoG,wBAAwB,GAAG,IAA3B;IACD;;IAED,IAAIC,sBAAsB,GAAG,KAA7B,CAjC+C,CAkC/C;;IACA,IAAIf,kBAAkB,CAACJ,KAAnB,CAAyB,CAAzB,MAAgChF,kBAApC,EAAwD;MACtDmG,sBAAsB,GAAG,IAAzB;IACD;;IAED,OACEH,2BAA2B,IAC3BE,wBADA,IAEAC,sBAHF;EAKD,CA5CyC,CAA1C;EA6CA,MAAMC,qBAAqB,GAAGnJ,cAAc,CAAC,KAAD,CAA5C;EACA,MAAMoJ,eAAe,GAAGpJ,cAAc,CAAC,KAAD,CAAtC,CAjL+B,CAmL/B;;EACA,MAAMqJ,2BAA2B,GAAGrJ,cAAc,CAChDS,KAAK,CAAC6I,YAD0C,CAAlD;EAGA,MAAMC,0BAA0B,GAAGvJ,cAAc,CAC/CS,KAAK,CAAC6I,YADyC,CAAjD,CAvL+B,CA0L/B;EAEA;EACA;;EACA,MAAM;IACJE,sBADI;IAEJC,gCAFI;IAGJC,+BAHI;IAIJC,uBAJI;IAKJC,gBALI;IAMJC;EANI,IAOFnJ,aAAa,EAPjB,CA9L+B,CAsM/B;;EACA,MAAM;IACJoJ,KAAK,EAAEC,qBADH;IAEJC,MAAM,EAAEC,sBAFJ;IAGJC,iBAAiB,EAAEC,yBAHf;IAIJC,eAAe,EAAEC,uBAJb;IAKJC;EALI,IAMFxJ,WAAW,EANf;EAOA,MAAMyJ,iCAAiC,GAAGvK,cAAc,CAAC,CAAD,CAAxD,CA9M+B,CA+M/B;EAEA;EACA;;EACA,MAAMwK,sBAAsB,GAAGxK,cAAc,CAACwB,eAAe,CAAC8H,YAAjB,CAA7C;EACA,MAAMmB,uBAAuB,GAAGzK,cAAc,CAC5C+B,gBAAgB,CAAC2I,KAD2B,CAA9C;EAGA,MAAMC,kBAAkB,GAAGzK,eAAe,CAAC,MAAM;IAC/C;IACA,IAAI4F,gBAAgB,CAACiC,KAAjB,IAA0BO,sBAAsB,CAACP,KAArD,EACE,OAAOpG,WAAW,CAACiJ,MAAnB,CAH6C,CAK/C;;IACA,MAAMC,gBAAgB,GACpBhD,uBAAuB,CAACE,KAAxB,GAAgCS,mBAAmB,CAACT,KADtD;IAEA,IAAIjC,gBAAgB,CAACiC,KAAjB,KAA2B8C,gBAA/B,EACE,OAAOlJ,WAAW,CAACmJ,QAAnB,CAT6C,CAW/C;IACA;;IACA,MAAMC,yBAAyB,GAAGR,iCAAiC,CAACxC,KAApE;IACA,MAAMiD,4BAA4B,GAAGC,IAAI,CAACC,GAAL,CACnC,CADmC,EAEnCrD,uBAAuB,CAACE,KAAxB,IACGS,mBAAmB,CAACT,KAApB,GAA4BgD,yBAD/B,CAFmC,CAArC,CAd+C,CAoB/C;;IACA,IACE9F,gBAAgB,KAAKvD,iBAAiB,CAACyJ,WAAvC,IACAhC,qBAAqB,CAACpB,KADtB,IAEAjC,gBAAgB,CAACiC,KAAjB,KAA2BiD,4BAH7B,EAIE;MACA,OAAOrJ,WAAW,CAACmJ,QAAnB;IACD,CA3B8C,CA6B/C;;;IACA,IAAIhF,gBAAgB,CAACiC,KAAjB,KAA2B,CAA/B,EAAkC;MAChC,OAAOpG,WAAW,CAACyJ,WAAnB;IACD,CAhC8C,CAkC/C;;;IACA,IAAItF,gBAAgB,CAACiC,KAAjB,GAAyB8C,gBAA7B,EAA+C;MAC7C,OAAOlJ,WAAW,CAAC0J,aAAnB;IACD;;IAED,OAAO1J,WAAW,CAAC2J,MAAnB;EACD,CAxCyC,EAwCvC,CACDhD,sBADC,EAEDT,uBAFC,EAGD0C,iCAHC,EAIDzE,gBAJC,EAKD0C,mBALC,EAMDW,qBANC,EAODlE,gBAPC,CAxCuC,CAA1C;EAiDA,MAAMsG,uBAAuB,GAAGrL,eAAe,CAAC,MAAM;IACpD;AACN;AACA;IACM,IACEwJ,+BAA+B,CAAC3B,KAAhC,KAA0CnG,gBAAgB,CAAC0H,YAD7D,EAEE;MACA,OAAOI,+BAA+B,CAAC3B,KAAvC;IACD;IACD;AACN;AACA;;;IACM,IAAI4C,kBAAkB,CAAC5C,KAAnB,KAA6BpG,WAAW,CAACyJ,WAA7C,EAA0D;MACxD,OAAOxJ,gBAAgB,CAAC4J,QAAxB;IACD;IAED;AACN;AACA;;;IACM,IAAIb,kBAAkB,CAAC5C,KAAnB,KAA6BpG,WAAW,CAACmJ,QAA7C,EAAuD;MACrD,OAAOlJ,gBAAgB,CAAC4J,QAAxB;IACD;IAED;AACN;AACA;AACA;AACA;;;IACM,IACEzB,qBAAqB,CAAChC,KAAtB,KAAgCtG,cAAc,CAACgK,KAA/C,IACAjB,sBAAsB,CAACzC,KAAvB,KAAiCvG,eAAe,CAACkK,OAFnD,EAGE;MACA,OAAO9J,gBAAgB,CAAC4J,QAAxB;IACD;;IAED,OAAO5J,gBAAgB,CAAC+J,MAAxB;EACD,CApC8C,CAA/C,CAxQ+B,CA6S/B;;EACA,MAAMC,qBAAqB,GAAG1L,eAAe,CAAC,MAAM;IAClD,MAAM6K,yBAAyB,GAAGR,iCAAiC,CAACxC,KAApE;IACA,MAAM3C,YAAY,GAAG6F,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYjD,oBAAoB,CAACF,KAAjC,CAArB;IACA,IAAIvC,aAAa,GAAGgD,mBAAmB,CAACT,KAApB,GAA4B3C,YAAhD;;IAEA,IACEH,gBAAgB,KAAKvD,iBAAiB,CAACmK,MAAvC,IACA9B,qBAAqB,CAAChC,KAAtB,KAAgCtG,cAAc,CAACgK,KAFjD,EAGE;MACAjG,aAAa,GAAGA,aAAa,GAAGuF,yBAAhC;IACD,CALD,MAKO,IACL9F,gBAAgB,KAAKvD,iBAAiB,CAACoK,UAAvC,IACA3C,qBAAqB,CAACpB,KAFjB,EAGL;MACA,IAAIgC,qBAAqB,CAAChC,KAAtB,KAAgCtG,cAAc,CAACgK,KAAnD,EAA0D;QACxDjG,aAAa,GACXqC,uBAAuB,CAACE,KAAxB,GACA3C,YADA,GAEA2F,yBAHF;MAID,CALD,MAKO;QACLvF,aAAa,GAAGqC,uBAAuB,CAACE,KAAxB,GAAgC3C,YAAhD;MACD;IACF,CAZM,MAYA,IACLH,gBAAgB,KAAKvD,iBAAiB,CAACyJ,WAAvC,IACAhC,qBAAqB,CAACpB,KAFjB,EAGL;MACA,MAAMgE,yBAAyB,GAC7BvG,aAAa,GAAGuF,yBADlB;;MAGA,IAAIhB,qBAAqB,CAAChC,KAAtB,KAAgCtG,cAAc,CAACgK,KAAnD,EAA0D;QACxD,IACEV,yBAAyB,GAAGvC,mBAAmB,CAACT,KAAhD,GACAF,uBAAuB,CAACE,KAF1B,EAGE;UACAvC,aAAa,GACXqC,uBAAuB,CAACE,KAAxB,GACAgD,yBADA,GAEA3F,YAHF;QAID;MACF,CAVD,MAUO,IACL2G,yBAAyB,GAAG3G,YAA5B,GACAyC,uBAAuB,CAACE,KAFnB,EAGL;QACAvC,aAAa,GAAGqC,uBAAuB,CAACE,KAAxB,GAAgC3C,YAAhD;MACD,CALM,MAKA;QACLI,aAAa,GAAGuG,yBAAhB;MACD;IACF;IAED;AACN;AACA;AACA;AACA;AACA;;;IACM,OAAOd,IAAI,CAACC,GAAL,CAAS1F,aAAT,EAAwB,CAAxB,CAAP;EACD,CAxD4C,EAwD1C,CACDqC,uBADC,EAEDI,oBAFC,EAGDsC,iCAHC,EAIDR,qBAJC,EAKDvB,mBALC,EAMDW,qBANC,EAODlE,gBAPC,CAxD0C,CAA7C;EAiEA,MAAMe,aAAa,GAAG9F,eAAe,CAAC,MAAM;IAC1C,MAAM8L,kBAAkB,GAAG7D,kBAAkB,CAACJ,KAAnB,CAAyBkE,KAAzB,GAAiCC,OAAjC,EAA3B;IACA,MAAMC,yBAAyB,GAAGhE,kBAAkB,CAACJ,KAAnB,CAC/BkE,KAD+B,GAE/BG,GAF+B,CAE3B,CAACC,CAAD,EAASzI,KAAT,KAA2BA,KAFA,EAG/BsI,OAH+B,EAAlC;IAKA;AACN;AACA;;IACMF,kBAAkB,CAACM,IAAnB,CAAwBzE,uBAAuB,CAACE,KAAhD;IACAoE,yBAAyB,CAACG,IAA1B,CAA+B,CAAC,CAAhC;IAEA,MAAMC,YAAY,GAAGzD,kBAAkB,CAACf,KAAnB,GACjB3H,WAAW,CACT0F,gBAAgB,CAACiC,KADR,EAETiE,kBAFS,EAGTG,yBAHS,EAIT9L,WAAW,CAACmM,KAJH,CADM,GAOjB,CAAC,CAPL;IASA;AACN;AACA;AACA;;IACM,IACErH,yBAAyB,KAAKrD,mBAAmB,CAAC2K,YAAlD,IACAhC,uBAAuB,CAAC1C,KAAxB,KAAkChG,gBAAgB,CAAC2K,QADnD,IAEAlC,sBAAsB,CAACzC,KAAvB,KAAiCvG,eAAe,CAACkK,OAFjD,IAGAvC,qBAAqB,CAACpB,KAJxB,EAKE;MACA,OAAOkD,IAAI,CAACC,GAAL,CAASzC,oBAAoB,CAACV,KAA9B,EAAqCwE,YAArC,CAAP;IACD;IAED;AACN;AACA;AACA;;;IACM,IACE9B,uBAAuB,CAAC1C,KAAxB,KAAkChG,gBAAgB,CAAC4K,iBAAnD,IACAnC,sBAAsB,CAACzC,KAAvB,KAAiCvG,eAAe,CAACkK,OAFnD,EAGE;MACA,OAAO/C,yBAAyB,CAACZ,KAAjC;IACD;;IAED,OAAOwE,YAAP;EACD,CA/CoC,EA+ClC,CAACpH,yBAAD,CA/CkC,CAArC,CA/W+B,CA+Z/B;EAEA;;EACA;AACJ;AACA;;EACI,MAAMyH,eAAe,GAAGpM,kBAAkB,CACxC,SAASoM,eAAT,GAA2B;IACzB;;IACA,MAAML,YAAY,GAAG9D,oBAAoB,CAACV,KAA1C;IACA,MAAMjE,UAAU,GAAGqE,kBAAkB,CAACJ,KAAtC;IACA,MAAM8E,aAAa,GAAG9C,qBAAqB,CAAChC,KAA5C;IACA,MAAM+E,gBAAgB,GAAG1E,wBAAwB,CAACL,KAAlD;IAEA;AACR;AACA;;IACQ,IACE7C,oBAAoB,KAAKrD,sBAAsB,CAACkL,OAAhD,IACAF,aAAa,KAAKpL,cAAc,CAACuL,MADjC,IAEA3D,2BAA2B,CAACtB,KAA5B,KAAsCtH,KAAK,CAACwM,MAF5C,IAGA1D,0BAA0B,CAACxB,KAA3B,KAAqCtH,KAAK,CAACwM,MAJ7C,EAKE;MACA9D,qBAAqB,CAACpB,KAAtB,GAA8B,KAA9B;MACA,MAAMmF,YAAY,GAAGpJ,UAAU,CAACyI,YAAD,CAA/B;MACA,OAAOW,YAAP;IACD;IAED;AACR;AACA;;;IACQ,IACEjI,gBAAgB,KAAKvD,iBAAiB,CAACmK,MAAvC,IACAgB,aAAa,KAAKpL,cAAc,CAACgK,KAFnC,EAGE;MACA,OAAOqB,gBAAP;IACD;IAED;AACR;AACA;;;IACQ,IACE7H,gBAAgB,KAAKvD,iBAAiB,CAACoK,UAAvC,IACAe,aAAa,KAAKpL,cAAc,CAACgK,KAFnC,EAGE;MACAtC,qBAAqB,CAACpB,KAAtB,GAA8B,IAA9B;MACA,OAAO,CAAP;IACD;IAED;AACR;AACA;;;IACQ,IACE9C,gBAAgB,KAAKvD,iBAAiB,CAACyJ,WAAvC,IACA0B,aAAa,KAAKpL,cAAc,CAACgK,KAFnC,EAGE;MACAtC,qBAAqB,CAACpB,KAAtB,GAA8B,IAA9B;MACA,MAAMgD,yBAAyB,GAC7BR,iCAAiC,CAACxC,KADpC;MAEA,OAAOkD,IAAI,CAACC,GAAL,CAAS,CAAT,EAAY4B,gBAAgB,GAAG/B,yBAA/B,CAAP;IACD;;IAED,IAAI5B,qBAAqB,CAACpB,KAA1B,EAAiC;MAC/B,OAAOjC,gBAAgB,CAACiC,KAAxB;IACD;;IAED,IAAI,CAACa,iBAAiB,CAACb,KAAvB,EAA8B;MAC5B,OAAOjE,UAAU,CAACD,cAAD,CAAjB;IACD;;IAED,OAAOC,UAAU,CAACyI,YAAD,CAAjB;EACD,CAjEuC,EAkExC,CACElD,2BADF,EAEEZ,oBAFF,EAGEc,0BAHF,EAIEnB,wBAJF,EAKEmC,iCALF,EAMER,qBANF,EAOEjE,gBAPF,EAQEqC,kBARF,EASEgB,qBATF,EAUEP,iBAVF,EAWE3D,gBAXF,EAYEC,oBAZF,EAaErB,cAbF,CAlEwC,CAA1C;EAkFA,MAAMsJ,cAAc,GAAG5N,WAAW,CAChC,SAAS4N,cAAT,CAAwBvJ,KAAxB,EAAuC;IACrCzB,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAEH,cAAc,CAACE,IAFnB;MAGJE,MAAM,EAAE;QACN3J,KADM;QAEN6E,oBAAoB,EAAEA,oBAAoB,CAACV;MAFrC;IAHJ,CAAD,CAAL;;IASA,IAAIhB,iBAAJ,EAAuB;MACrBA,iBAAiB,CAACnD,KAAD,CAAjB;IACD;EACF,CAd+B,EAehC,CAACmD,iBAAD,EAAoB0B,oBAApB,CAfgC,CAAlC;EAiBA,MAAM+E,eAAe,GAAGjO,WAAW,CACjC,SAASiO,eAAT,CAAyBC,OAAzB,EAA0C;IACxC,MAAM3J,UAAU,GAAGqE,kBAAkB,CAACJ,KAAtC;IACA,MAAM2F,OAAO,GAAG5J,UAAU,CAAC6J,OAAX,CAAmBF,OAAnB,CAAhB;IAEAtL,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAEE,eAAe,CAACH,IAFpB;MAGJE,MAAM,EAAE;QACNG,OADM;QAENE,SAAS,EAAEnF,oBAAoB,CAACV;MAF1B;IAHJ,CAAD,CAAL;;IASA,IAAI,CAACZ,kBAAL,EAAyB;MACvB;IACD;;IAED,IAAIuG,OAAO,KAAKjF,oBAAoB,CAACV,KAArC,EAA4C;MAC1CZ,kBAAkB,CAACsB,oBAAoB,CAACV,KAAtB,EAA6B2F,OAA7B,CAAlB;IACD;EACF,CArBgC,EAsBjC,CAACvG,kBAAD,EAAqBgB,kBAArB,EAAyCM,oBAAzC,CAtBiC,CAAnC,CAxgB+B,CAgiB/B;EAEA;;EACA,MAAMoF,aAAa,GAAGrN,kBAAkB,CAAC,MAAM;IAC7CD,eAAe,CAACuF,gBAAD,CAAf;IACAsD,eAAe,CAACrB,KAAhB,GAAwB,KAAxB;IACA0C,uBAAuB,CAAC1C,KAAxB,GAAgChG,gBAAgB,CAAC+L,IAAjD;IACAtD,sBAAsB,CAACzC,KAAvB,GAA+BvG,eAAe,CAACuM,OAA/C;EACD,CALuC,EAKrC,CAACjI,gBAAD,EAAmB0E,sBAAnB,EAA2CC,uBAA3C,CALqC,CAAxC;EAMA,MAAMuD,0BAA0B,GAAGxN,kBAAkB,CACnD,SAASwN,0BAAT,CAAoCC,UAApC,EAA0D;IACxD7E,eAAe,CAACrB,KAAhB,GAAwB,KAAxB;;IAEA,IAAI,CAACkG,UAAL,EAAiB;MACf;IACD;;IACD9N,OAAO,CAACgC,KAAD,CAAP,CAAe;MACbiL,SAAS,EAAE7J,WAAW,CAAC8J,IADV;MAEbC,MAAM,EAAEU,0BAA0B,CAACX,IAFtB;MAGbE,MAAM,EAAE;QACN9E,oBAAoB,EAAEA,oBAAoB,CAACV,KADrC;QAENW,oBAAoB,EAAEA,oBAAoB,CAACX,KAFrC;QAGNY,yBAAyB,EAAEA,yBAAyB,CAACZ;MAH/C;IAHK,CAAf;IAUA0C,uBAAuB,CAAC1C,KAAxB,GAAgChG,gBAAgB,CAAC+L,IAAjD;IACAtD,sBAAsB,CAACzC,KAAvB,GAA+BvG,eAAe,CAACuM,OAA/C;IACArF,oBAAoB,CAACX,KAArB,GAA6B7E,aAA7B;IACAyF,yBAAyB,CAACZ,KAA1B,GAAkC7E,aAAlC;EACD,CArBkD,CAArD;EAuBA,MAAMgL,iBAAwC,GAAG1N,kBAAkB,CACjE,SAAS0N,iBAAT,CACEC,QADF,EAEEC,MAFF,EAKE;IAAA,IAFAC,QAEA,uEAFmB,CAEnB;IAAA,IADAC,OACA;;IACA,IACEH,QAAQ,KAAKrI,gBAAgB,CAACiC,KAA9B,IACAoG,QAAQ,KAAKnF,SADb,IAECwB,sBAAsB,CAACzC,KAAvB,KAAiCvG,eAAe,CAACkK,OAAjD,IACCyC,QAAQ,KAAKzF,oBAAoB,CAACX,KAJtC,EAKE;MACA;IACD;;IAED5H,OAAO,CAACgC,KAAD,CAAP,CAAe;MACbiL,SAAS,EAAE7J,WAAW,CAAC8J,IADV;MAEbC,MAAM,EAAEY,iBAAiB,CAACb,IAFb;MAGbE,MAAM,EAAE;QACNgB,eAAe,EAAEzI,gBAAgB,CAACiC,KAD5B;QAENoG,QAFM;QAGNE;MAHM;IAHK,CAAf;IAUAR,aAAa;IAEb;AACR;AACA;;IACQrD,sBAAsB,CAACzC,KAAvB,GAA+BvG,eAAe,CAACkK,OAA/C;IACAjB,uBAAuB,CAAC1C,KAAxB,GAAgCqG,MAAhC;IAEA;AACR;AACA;;IACQ1F,oBAAoB,CAACX,KAArB,GAA6BoG,QAA7B;IACAxF,yBAAyB,CAACZ,KAA1B,GACEI,kBAAkB,CAACJ,KAAnB,CAAyB4F,OAAzB,CAAiCQ,QAAjC,CADF;IAGA;AACR;AACA;;IACQhO,OAAO,CAACqN,eAAD,CAAP,CAAyBW,QAAzB;IAEA;AACR;AACA;;IACQ,IAAIG,OAAO,KAAKtF,SAAhB,EAA2B;MACzBlD,gBAAgB,CAACiC,KAAjB,GAAyB/F,OAAO,CAAC;QAC/BwM,KAAK,EAAEL,QADwB;QAE/BG,OAF+B;QAG/BD,QAH+B;QAI/BI,UAAU,EAAET;MAJmB,CAAD,CAAhC;IAMD,CAPD,MAOO;MACL;AACV;AACA;MACUlI,gBAAgB,CAACiC,KAAjB,GAAyB/F,OAAO,CAAC;QAC/BwM,KAAK,EAAEL,QADwB;QAE/BE,QAF+B;QAG/BC,OAAO,EAAE3K,yBAHsB;QAI/B8K,UAAU,EAAET;MAJmB,CAAD,CAAhC;IAMD;EACF,CAnEgE,EAoEjE,CAACR,eAAD,EAAkB7J,yBAAlB,CApEiE,CAAnE,CAhkB+B,CAsoB/B;EAEA;;EACA,MAAM+K,iBAAiB,GAAGnP,WAAW,CACnC,SAASmP,iBAAT,CACE9K,KADF,EAEEF,gBAFF,EAGE;IACA,MAAMI,UAAU,GAAGqE,kBAAkB,CAACJ,KAAtC;IACAlI,SAAS,CACP+D,KAAK,IAAI,CAAC,CAAV,IAAeA,KAAK,IAAIE,UAAU,CAACuE,MAAX,GAAoB,CADrC,EAEN,oGACCvE,UAAU,CAACuE,MAAX,GAAoB,CACrB,EAJM,CAAT;IAMAlG,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAEoB,iBAAiB,CAACrB,IAFtB;MAGJE,MAAM,EAAE;QACN3J;MADM;IAHJ,CAAD,CAAL;IAQA,MAAMsJ,YAAY,GAAGpJ,UAAU,CAACF,KAAD,CAA/B;IAEA;AACR;AACA;AACA;AACA;AACA;;IACQ,IACE,CAACkF,kBAAkB,CAACf,KAApB,IACAnE,KAAK,KAAK+E,yBAAyB,CAACZ,KADpC,IAEAmF,YAAY,KAAKxE,oBAAoB,CAACX,KAFtC,IAGAqB,eAAe,CAACrB,KAJlB,EAKE;MACA;IACD;IAED;AACR;AACA;;;IACQoB,qBAAqB,CAACpB,KAAtB,GAA8B,KAA9B;IAEAzH,OAAO,CAAC4N,iBAAD,CAAP,CACEhB,YADF,EAEEnL,gBAAgB,CAAC4M,IAFnB,EAGE,CAHF,EAIEjL,gBAJF;EAMD,CAhDkC,EAiDnC,CACEwK,iBADF,EAEEpF,kBAFF,EAGEK,qBAHF,EAIEC,eAJF,EAKEjB,kBALF,EAMEO,oBANF,EAOEC,yBAPF,CAjDmC,CAArC;EA2DA,MAAMiG,oBAAoB,GAAGpO,kBAAkB,CAC7C,SAASoO,oBAAT,CACET,QADF,EAEEzK,gBAFF,EAGE;IACAvB,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAEsB,oBAAoB,CAACvB,IAFzB;MAGJE,MAAM,EAAE;QACNY;MADM;IAHJ,CAAD,CAAL;IAQA;AACR;AACA;;IACQ,MAAMjB,YAAY,GAAGhL,kBAAkB,CACrCiM,QADqC,EAErCtG,uBAAuB,CAACE,KAFa,EAGrCnC,QAHqC,EAIrCC,WAJqC,CAAvC;IAOA;AACR;AACA;AACA;AACA;AACA;;IACQ,IACE,CAACiD,kBAAD,IACAoE,YAAY,KAAKxE,oBAAoB,CAACX,KADtC,IAEAqB,eAAe,CAACrB,KAHlB,EAIE;MACA;IACD;IAED;AACR;AACA;;;IACQoB,qBAAqB,CAACpB,KAAtB,GAA8B,IAA9B;IAEAzH,OAAO,CAAC4N,iBAAD,CAAP,CACEhB,YADF,EAEEnL,gBAAgB,CAAC4M,IAFnB,EAGE,CAHF,EAIEjL,gBAJF;EAMD,CAhD4C,EAiD7C,CACEwK,iBADF,EAEErI,WAFF,EAGED,QAHF,EAIEkD,kBAJF,EAKEM,eALF,EAMEvB,uBANF,EAOE/B,gBAPF,CAjD6C,CAA/C;EA2DA,MAAM+I,WAAW,GAAGtP,WAAW,CAC7B,SAASsP,WAAT,CACEnL,gBADF,EAEE;IACAvB,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAEuB,WAAW,CAACxB;IAFhB,CAAD,CAAL;IAKA,MAAMH,YAAY,GAAG5E,sBAAsB,CAACP,KAA5C;IAEA;AACR;AACA;AACA;AACA;AACA;;IACQ,IACE,CAACe,kBAAkB,CAACf,KAApB,IACAmF,YAAY,KAAKxE,oBAAoB,CAACX,KADtC,IAEAqB,eAAe,CAACrB,KAHlB,EAIE;MACA;IACD;IAED;AACR;AACA;;;IACQoB,qBAAqB,CAACpB,KAAtB,GAA8B,KAA9B;IAEAzH,OAAO,CAAC4N,iBAAD,CAAP,CACEhB,YADF,EAEEnL,gBAAgB,CAAC4M,IAFnB,EAGE,CAHF,EAIEjL,gBAJF;EAMD,CApC4B,EAqC7B,CACEwK,iBADF,EAEE9E,eAFF,EAGEN,kBAHF,EAIEK,qBAJF,EAKET,oBALF,EAMEJ,sBANF,CArC6B,CAA/B;EA8CA,MAAMwG,gBAAgB,GAAGvP,WAAW,CAClC,SAASuP,gBAAT,CACEpL,gBADF,EAEE;IACAvB,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAEwB,gBAAgB,CAACzB;IAFrB,CAAD,CAAL;IAKA,MAAMH,YAAY,GAAG5E,sBAAsB,CAACP,KAA5C;IAEA;AACR;AACA;AACA;AACA;;IACQ,IACEmF,YAAY,KAAKxE,oBAAoB,CAACX,KAAtC,IACAqB,eAAe,CAACrB,KAFlB,EAGE;MACA;IACD;IAED;AACR;AACA;;;IACQoB,qBAAqB,CAACpB,KAAtB,GAA8B,KAA9B;IAEA;AACR;AACA;;IACQqB,eAAe,CAACrB,KAAhB,GAAwB,IAAxB;IAEAzH,OAAO,CAAC4N,iBAAD,CAAP,CACEhB,YADF,EAEEnL,gBAAgB,CAAC4M,IAFnB,EAGE,CAHF,EAIEjL,gBAJF;EAMD,CAvCiC,EAwClC,CACEwK,iBADF,EAEE9E,eAFF,EAGED,qBAHF,EAIET,oBAJF,EAKEJ,sBALF,CAxCkC,CAApC;EAgDA,MAAMyG,YAAY,GAAGxP,WAAW,CAC9B,SAASwP,YAAT,CACErL,gBADF,EAEE;IACAvB,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAEyB,YAAY,CAAC1B;IAFjB,CAAD,CAAL;IAKA,MAAMvJ,UAAU,GAAGqE,kBAAkB,CAACJ,KAAtC;IACA,MAAMmF,YAAY,GAAGpJ,UAAU,CAACA,UAAU,CAACuE,MAAX,GAAoB,CAArB,CAA/B;IAEA;AACR;AACA;AACA;AACA;AACA;;IACQ,IACE,CAACS,kBAAkB,CAACf,KAApB,IACAjE,UAAU,CAACuE,MAAX,GAAoB,CAApB,KAA0BM,yBAAyB,CAACZ,KADpD,IAEAmF,YAAY,KAAKxE,oBAAoB,CAACX,KAFtC,IAGAqB,eAAe,CAACrB,KAJlB,EAKE;MACA;IACD;IAED;AACR;AACA;;;IACQoB,qBAAqB,CAACpB,KAAtB,GAA8B,KAA9B;IAEAzH,OAAO,CAAC4N,iBAAD,CAAP,CACEhB,YADF,EAEEnL,gBAAgB,CAAC4M,IAFnB,EAGE,CAHF,EAIEjL,gBAJF;EAMD,CAtC6B,EAuC9B,CACEwK,iBADF,EAEE/E,qBAFF,EAGEL,kBAHF,EAIEM,eAJF,EAKEjB,kBALF,EAMEO,oBANF,EAOEC,yBAPF,CAvC8B,CAAhC;EAiDA,MAAMqG,cAAc,GAAGzP,WAAW,CAChC,SAASyP,cAAT,CACEtL,gBADF,EAEE;IACAvB,KAAK,CAAC;MACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;MAEJC,MAAM,EAAE0B,cAAc,CAAC3B;IAFnB,CAAD,CAAL;IAKA,MAAMH,YAAY,GAAG/E,kBAAkB,CAACJ,KAAnB,CAAyB,CAAzB,CAArB;IAEA;AACR;AACA;AACA;AACA;AACA;;IACQ,IACE,CAACe,kBAAD,IACAH,yBAAyB,CAACZ,KAA1B,KAAoC,CADpC,IAEAmF,YAAY,KAAKxE,oBAAoB,CAACX,KAFtC,IAGAqB,eAAe,CAACrB,KAJlB,EAKE;MACA;IACD;IAED;AACR;AACA;;;IACQoB,qBAAqB,CAACpB,KAAtB,GAA8B,KAA9B;IAEAzH,OAAO,CAAC4N,iBAAD,CAAP,CACEhB,YADF,EAEEnL,gBAAgB,CAAC4M,IAFnB,EAGE,CAHF,EAIEjL,gBAJF;EAMD,CArC+B,EAsChC,CACEwK,iBADF,EAEE9E,eAFF,EAGEN,kBAHF,EAIEK,qBAJF,EAKEhB,kBALF,EAMEO,oBANF,EAOEC,yBAPF,CAtCgC,CAAlC;EAiDAlJ,mBAAmB,CAACgE,GAAD,EAAM,OAAO;IAC9BwL,WAAW,EAAEP,iBADiB;IAE9BQ,cAAc,EAAEN,oBAFc;IAG9BO,MAAM,EAAEJ,YAHsB;IAI9BK,QAAQ,EAAEJ,cAJoB;IAK9BK,KAAK,EAAER,WALuB;IAM9BS,UAAU,EAAER;EANkB,CAAP,CAAN,CAAnB,CA/7B+B,CAu8B/B;EAEA;;EACA,MAAMS,wBAAwB,GAAGjQ,OAAO,CACtC,OAAO;IACL2E,2BADK;IAELI,wBAFK;IAGLF,cAHK;IAILC,oBAJK;IAKLoG,sBALK;IAMLG,kBANK;IAOLY,uBAPK;IAQL7B,+BARK;IASLL,2BATK;IAULE,0BAVK;IAWLQ,qBAXK;IAYLP,sBAZK;IAaLxD,aAbK;IAcLF,gBAdK;IAeL8F,qBAfK;IAgBLtD,sBAhBK;IAiBLL,oBAjBK;IAkBLC,oBAlBK;IAmBL+B,sBAnBK;IAoBLM,iCApBK;IAqBL1C,uBArBK;IAsBLM,kBAtBK;IAuBLC,wBAvBK;IAwBLqB,gCAxBK;IAyBLN,qBAzBK;IA0BLN,oBA1BK;IA2BLc,uBA3BK;IA4BLW,0BA5BK;IA6BLpE,oBAAoB,EAAEC,6BA7BjB;IA8BLC,OAAO,EAAEC,gBA9BJ;IA+BLC,aAAa,EAAEC,sBA/BV;IAgCLC,aAAa,EAAEC,sBAhCV;IAiCLC,WAAW,EAAEC,oBAjCR;IAkCLC,WAAW,EAAEC,oBAlCR;IAmCLqH,iBAnCK;IAoCLL,aApCK;IAqCLjE,gBArCK;IAsCLC;EAtCK,CAAP,CADsC,EAyCtC,CACE7D,aADF,EAEEF,gBAFF,EAGE8F,qBAHF,EAIEpC,sBAJF,EAKEH,2BALF,EAMEE,0BANF,EAOEjB,sBAPF,EAQEJ,oBARF,EASEL,uBATF,EAUEI,oBAVF,EAWEuC,sBAXF,EAYET,qBAZF,EAaEE,sBAbF,EAcEM,iCAdF,EAeEI,kBAfF,EAgBEvC,wBAhBF,EAiBEmD,uBAjBF,EAkBE7B,+BAlBF,EAmBEvB,kBAnBF,EAoBEmC,0BApBF,EAqBEb,gCArBF,EAsBEE,uBAtBF,EAuBEd,oBAvBF,EAwBEM,qBAxBF,EAyBElF,2BAzBF,EA0BEI,wBA1BF,EA2BEF,cA3BF,EA4BEC,oBA5BF,EA6BE+B,6BA7BF,EA8BEE,gBA9BF,EA+BEE,sBA/BF,EAgCEE,sBAhCF,EAiCEE,oBAjCF,EAkCEE,oBAlCF,EAmCE+C,gBAnCF,EAoCEC,mBApCF,EAqCEqE,iBArCF,EAsCEL,aAtCF,CAzCsC,CAAxC;EAkFA,MAAM2B,wBAAwB,GAAGlQ,OAAO,CACtC,OAAO;IACL0G,aADK;IAELF,gBAFK;IAGLmJ,WAAW,EAAEP,iBAHR;IAILQ,cAAc,EAAEN,oBAJX;IAKLO,MAAM,EAAEJ,YALH;IAMLK,QAAQ,EAAEJ,cANL;IAOLK,KAAK,EAAER,WAPF;IAQLS,UAAU,EAAER;EARP,CAAP,CADsC,EAWtC,CACE9I,aADF,EAEEF,gBAFF,EAGE4I,iBAHF,EAIEE,oBAJF,EAKEG,YALF,EAMEC,cANF,EAOEH,WAPF,EAQEC,gBARF,CAXsC,CAAxC,CA5hC+B,CAkjC/B;EAEA;;EACA,MAAMW,sBAAsB,GAAGxP,gBAAgB,CAC7C,OAAO;IACLyP,OAAO,EACL9P,QAAQ,CAAC+P,EAAT,KAAgB,SAAhB,IAA6B3J,aAAa,CAAC+B,KAAd,KAAwB,CAAC,CAAtD,GAA0D,CAA1D,GAA8D,CAF3D;IAGL6H,SAAS,EAAE,CACT;MACEC,UAAU,EAAE/J,gBAAgB,CAACiC;IAD/B,CADS;EAHN,CAAP,CAD6C,EAU7C,CAACjC,gBAAD,EAAmBE,aAAnB,CAV6C,CAA/C;EAYA,MAAMxB,cAAc,GAAGlF,OAAO,CAC5B,MAAM,CAACiF,cAAD,EAAiBpB,MAAM,CAAC2M,SAAxB,EAAmCL,sBAAnC,CADsB,EAE5B,CAAClL,cAAD,EAAiBkL,sBAAjB,CAF4B,CAA9B;EAIA,MAAMM,6BAA6B,GAAG9P,gBAAgB,CAAC,MAAM;IAC3D;AACN;AACA;AACA;IACM,IAAIwF,sBAAJ,EAA4B;MAC1B,OAAO,EAAP;IACD;;IAED,OAAO;MACLuE,MAAM,EAAEhI,OAAO,CAAC;QACdwM,KAAK,EAAE5C,qBAAqB,CAAC7D,KADf;QAEduG,OAAO,EAAE3K;MAFK,CAAD;IADV,CAAP;EAMD,CAfqD,EAenD,CAACiI,qBAAD,EAAwBnG,sBAAxB,CAfmD,CAAtD;EAgBA,MAAMuK,qBAAqB,GAAG1Q,OAAO,CACnC,MAAM,CAAC6D,MAAM,CAAC8M,gBAAR,EAA0BF,6BAA1B,CAD6B,EAEnC,CAACA,6BAAD,CAFmC,CAArC;EAIA;AACJ;AACA;AACA;AACA;;EACI,MAAMG,iCAAiC,GAAGjQ,gBAAgB,CAAC,MAAM;IAC/D,IAAIoH,QAAJ,EAAc;MACZ,OAAO;QACL8I,QAAQ,EAAE;MADL,CAAP;IAGD;;IACD,OAAO;MACLC,aAAa,EAAEvI,uBAAuB,CAACE;IADlC,CAAP;EAGD,CATyD,EASvD,CAACV,QAAD,CATuD,CAA1D;EAUA,MAAMgJ,yBAAyB,GAAG/Q,OAAO,CACvC,MAAM,CAAC6D,MAAM,CAACmN,oBAAR,EAA8BJ,iCAA9B,CADiC,EAEvC,CAACA,iCAAD,CAFuC,CAAzC,CAxmC+B,CA4mC/B;EAEA;;EACA;AACJ;AACA;AACA;AACA;AACA;;EACInQ,mBAAmB,CACjB,MAAM+I,kBAAkB,CAACf,KADR,EAEjBwI,mBAAmB,IAAI;IACrB;AACR;AACA;AACA;AACA;IACQ,IAAI,CAACA,mBAAD,IAAwB3H,iBAAiB,CAACb,KAA9C,EAAqD;MACnD;IACD;;IAED,IAAImF,YAAJ;;IACA,IAAIrJ,cAAc,KAAK,CAAC,CAAxB,EAA2B;MACzBqJ,YAAY,GAAG5E,sBAAsB,CAACP,KAAtC;MACAY,yBAAyB,CAACZ,KAA1B,GAAkC,CAAC,CAAnC;IACD,CAHD,MAGO;MACLmF,YAAY,GAAGN,eAAe,EAA9B;IACD;;IAEDzM,OAAO,CAACgC,KAAD,CAAP,CAAe;MACbiL,SAAS,EAAE7J,WAAW,CAAC8J,IADV;MAEbC,MAAM,EAAE,8BAFK;MAGbC,MAAM,EAAE;QACNzE,kBAAkB,EAAEyH,mBADd;QAENpI,kBAAkB,EAAEA,kBAAkB,CAACJ,KAFjC;QAGNmF;MAHM;IAHK,CAAf;IAUA;AACR;AACA;AACA;AACA;;IACQ,IACEA,YAAY,KAAKpK,gBAAjB,IACAoK,YAAY,KAAK5E,sBAAsB,CAACP,KAF1C,EAGE;MACAa,iBAAiB,CAACb,KAAlB,GAA0B,IAA1B;MACAU,oBAAoB,CAACV,KAArB,GAA6BlE,cAA7B;MACA;IACD;;IAED,IAAIG,cAAJ,EAAoB;MAClBkK,iBAAiB,CAAChB,YAAD,EAAenL,gBAAgB,CAAC2I,KAAhC,CAAjB;IACD,CAFD,MAEO;MACL5E,gBAAgB,CAACiC,KAAjB,GAAyBmF,YAAzB;IACD;;IACDtE,iBAAiB,CAACb,KAAlB,GAA0B,IAA1B;EACD,CAlDgB,EAmDjB,CAAClE,cAAD,EAAiBG,cAAjB,CAnDiB,CAAnB;EAsDA;AACJ;AACA;AACA;AACA;AACA;;EACIjE,mBAAmB,CACjB,OAAO;IACL+D,UAAU,EAAEqE,kBAAkB,CAACJ,KAD1B;IAELzC,eAAe,EAAEuC,uBAAuB,CAACE;EAFpC,CAAP,CADiB,EAKjB,CAACyI,MAAD,EAASC,eAAT,KAA6B;IAC3B,MAAM;MAAE3M,UAAF;MAAcwB;IAAd,IAAkCkL,MAAxC;;IACA,MAAME,mBAAmB,GAAGD,eAAH,aAAGA,eAAH,uBAAGA,eAAe,CAAE3M,UAA7C;;IACA,MAAM6M,wBAAwB,GAAGF,eAAH,aAAGA,eAAH,uBAAGA,eAAe,CAAEnL,eAAlD;;IAEA,IACEsL,IAAI,CAACC,SAAL,CAAe/M,UAAf,MAA+B8M,IAAI,CAACC,SAAL,CAAeH,mBAAf,CAA/B,IACA,CAAC5H,kBAAkB,CAACf,KADpB,IAEA,CAACa,iBAAiB,CAACb,KAFnB,IAGAzC,eAAe,IAAI,CAJrB,EAKE;MACA;IACD;;IAEDnF,OAAO,CAACgC,KAAD,CAAP,CAAe;MACbiL,SAAS,EAAE7J,WAAW,CAAC8J,IADV;MAEbC,MAAM,EAAE,wCAFK;MAGbC,MAAM,EAAE;QACNzJ;MADM;IAHK,CAAf;IAQA,IAAIoJ,YAAJ;IACA,IAAI4D,eAAJ;IACA,IAAIC,eAAe,GAAGhP,gBAAgB,CAAC4K,iBAAvC;IAEA;AACR;AACA;AACA;;IACQ,IACEnC,sBAAsB,CAACzC,KAAvB,KAAiCvG,eAAe,CAACkK,OAAjD,IACA/C,yBAAyB,CAACZ,KAA1B,KAAoCU,oBAAoB,CAACV,KAF3D,EAGE;MACAmF,YAAY,GACVvE,yBAAyB,CAACZ,KAA1B,KAAoC,CAAC,CAArC,GACIjE,UAAU,CAAC6E,yBAAyB,CAACZ,KAA3B,CADd,GAEIW,oBAAoB,CAACX,KAH3B;IAID,CARD,MAQO,IAAIU,oBAAoB,CAACV,KAArB,KAA+B,CAAC,CAApC,EAAuC;MAC5CmF,YAAY,GAAG5E,sBAAsB,CAACP,KAAtC;IACD,CAFM,MAEA,IAAIoB,qBAAqB,CAACpB,KAA1B,EAAiC;MACtCmF,YAAY,GAAGN,eAAe,EAA9B;IACD,CAFM,MAEA;MACLM,YAAY,GAAGpJ,UAAU,CAAC2E,oBAAoB,CAACV,KAAtB,CAAzB;MAEA;AACV;AACA;AACA;;MACU,IAAIzC,eAAe,KAAKqL,wBAAxB,EAAkD;QAChDI,eAAe,GAAGhP,gBAAgB,CAACiP,gBAAnC;QACAF,eAAe,GAAG;UAChBG,QAAQ,EAAE;QADM,CAAlB;MAGD;IACF;;IACD/C,iBAAiB,CAAChB,YAAD,EAAe6D,eAAf,EAAgC,CAAhC,EAAmCD,eAAnC,CAAjB;EACD,CA9DgB,CAAnB;EAiEA;AACJ;AACA;AACA;AACA;;EACI/Q,mBAAmB,CACjB,OAAO;IACLmR,cAAc,EAAEnH,qBAAqB,CAAChC,KADjC;IAELoJ,eAAe,EAAElH,sBAAsB,CAAClC;EAFnC,CAAP,CADiB,EAKjB,CAACyI,MAAD,EAASC,eAAT,KAA6B;IAC3B,MAAM;MAAES,cAAF;MAAkBC;IAAlB,IAAsCX,MAA5C;;IACA,MAAMY,sBAAsB,GAAGX,eAAH,aAAGA,eAAH,uBAAGA,eAAe,CAAES,cAAhD;;IACA,MAAMG,uBAAuB,GAAGZ,eAAH,aAAGA,eAAH,uBAAGA,eAAe,CAAEU,eAAjD;IAEA;AACR;AACA;;;IACQ5G,iCAAiC,CAACxC,KAAlC,GAA0CX,MAAM,GAC5C6D,IAAI,CAACqG,GAAL,CACEH,eAAe,GACblG,IAAI,CAACqG,GAAL,CAASzL,WAAW,GAAGmC,uBAAuB,CAACD,KAAxB,CAA8BwJ,MAArD,CAFJ,CAD4C,GAK5CtG,IAAI,CAACqG,GAAL,CAASH,eAAe,GAAGnJ,uBAAuB,CAACD,KAAxB,CAA8BwJ,MAAzD,CALJ;IAOA;AACR;AACA;;IACQ,IACEL,cAAc,KAAKE,sBAAnB,IACAD,eAAe,KAAKE,uBAFtB,EAGE;MACA;IACD;IAED;AACR;AACA;;;IACQ,MAAMG,gBAAgB,GACpBnI,2BAA2B,CAACtB,KAA5B,KAAsCtH,KAAK,CAACwM,MAA5C,IACA5D,2BAA2B,CAACtB,KAA5B,KAAsCtH,KAAK,CAACgR,KAD5C,IAEAlI,0BAA0B,CAACxB,KAA3B,KAAqCtH,KAAK,CAACwM,MAF3C,IAGA1D,0BAA0B,CAACxB,KAA3B,KAAqCtH,KAAK,CAACgR,KAJ7C;;IAKA,IAAID,gBAAJ,EAAsB;MACpB;IACD;IAED;AACR;AACA;;;IACQ,IAAI,CAAC5I,iBAAiB,CAACb,KAAvB,EAA8B;MAC5B;IACD;IAED;AACR;AACA;;;IACQ,IACEmJ,cAAc,KAAKzP,cAAc,CAACuL,MAAlC,IACA9H,oBAAoB,KAAKrD,sBAAsB,CAAC6P,IAFlD,EAGE;MACA;IACD;IAED;AACR;AACA;;;IACQ,IACE9R,QAAQ,CAAC+P,EAAT,KAAgB,SAAhB,IACA1K,gBAAgB,KAAKvD,iBAAiB,CAACyJ,WADvC,IAEAhG,yBAAyB,KAAKrD,mBAAmB,CAAC2K,YAHpD,EAIE;MACAlC,iCAAiC,CAACxC,KAAlC,GAA0C,CAA1C;MACA;IACD;;IAED5H,OAAO,CAACgC,KAAD,CAAP,CAAe;MACbiL,SAAS,EAAE7J,WAAW,CAAC8J,IADV;MAEbC,MAAM,EAAE,4CAFK;MAGbC,MAAM,EAAE;QACNV,aAAa,EAAEqE,cADT;QAENS,cAAc,EAAER;MAFV;IAHK,CAAf;IASA,IAAIzN,gBAAgB,GAAGzB,2BAA2B,CAChDoI,uBAAuB,CAACtC,KADwB,EAEhDoC,yBAAyB,CAACpC,KAFsB,CAAlD;IAIA,MAAMmF,YAAY,GAAGN,eAAe,EAApC;IACAsB,iBAAiB,CACfhB,YADe,EAEfnL,gBAAgB,CAAC2K,QAFF,EAGf,CAHe,EAIfhJ,gBAJe,CAAjB;EAMD,CA3FgB,EA4FjB,CACE0D,MADF,EAEEvB,WAFF,EAGEZ,gBAHF,EAIEC,oBAJF,EAKEC,yBALF,EAME6C,uBANF,EAOE4E,eAPF,CA5FiB,CAAnB;EAuGA;AACJ;AACA;;EACI7M,mBAAmB,CACjB,MAAM+F,gBAAgB,CAACiC,KADN,EAEjB6J,iBAAiB,IAAI;IACnB,IAAI7L,yBAAJ,EAA+B;MAC7BA,yBAAyB,CAACgC,KAA1B,GAAkC6J,iBAAiB,GAAGhM,QAAtD;IACD;EACF,CANgB,CAAnB;EASA;AACJ;AACA;;EACI7F,mBAAmB,CACjB,MAAMiG,aAAa,CAAC+B,KADH,EAEjB8J,cAAc,IAAI;IAChB,IAAI5L,sBAAJ,EAA4B;MAC1BA,sBAAsB,CAAC8B,KAAvB,GAA+B8J,cAA/B;IACD;EACF,CANgB,CAAnB;EASA;AACJ;AACA;AACA;AACA;;EACI9R,mBAAmB,CACjB,OAAO;IACL8R,cAAc,EAAE7L,aAAa,CAAC+B,KADzB;IAEL6J,iBAAiB,EAAE9L,gBAAgB,CAACiC,KAF/B;IAGL+J,eAAe,EAAEtH,sBAAsB,CAACzC,KAHnC;IAILgK,oBAAoB,EAAE1I,2BAA2B,CAACtB,KAJ7C;IAKLiK,mBAAmB,EAAEzI,0BAA0B,CAACxB;EAL3C,CAAP,CADiB,EAQjB,QAKM;IAAA,IALL;MACC8J,cADD;MAECC,eAFD;MAGCC,oBAHD;MAICC;IAJD,CAKK;;IACJ;AACR;AACA;IACQ,IAAIF,eAAe,KAAKtQ,eAAe,CAACuM,OAAxC,EAAiD;MAC/C;IACD;IAED;AACR;AACA;AACA;;;IACQ,IAAI8D,cAAc,GAAG,CAAjB,KAAuB,CAA3B,EAA8B;MAC5B;IACD;IAED;AACR;AACA;;;IACQ,MAAMI,kBAAkB,GACtB,CAACF,oBAAoB,KAAKtR,KAAK,CAACyR,GAA/B,IACCH,oBAAoB,KAAKtR,KAAK,CAAC6I,YADhC,IAECyI,oBAAoB,KAAKtR,KAAK,CAAC0R,SAFjC,MAGCH,mBAAmB,KAAKvR,KAAK,CAACyR,GAA9B,IACCF,mBAAmB,KAAKvR,KAAK,CAAC6I,YAD/B,IAEC0I,mBAAmB,KAAKvR,KAAK,CAAC0R,SALhC,CADF;;IAOA,IAAI,CAACF,kBAAL,EAAyB;MACvB;IACD;IAED;AACR;AACA;AACA;AACA;;;IACQ,IAAIJ,cAAc,KAAKpJ,oBAAoB,CAACV,KAA5C,EAAmD;MACjD5H,OAAO,CAACgC,KAAD,CAAP,CAAe;QACbiL,SAAS,EAAE7J,WAAW,CAAC8J,IADV;QAEbC,MAAM,EAAE,+BAFK;QAGbC,MAAM,EAAE;UACN9E,oBAAoB,EAAEA,oBAAoB,CAACV,KADrC;UAEN/B,aAAa,EAAE6L;QAFT;MAHK,CAAf;MASApJ,oBAAoB,CAACV,KAArB,GAA6B8J,cAA7B;MACA1R,OAAO,CAACgN,cAAD,CAAP,CAAwB0E,cAAxB;IACD;IAED;AACR;AACA;;;IACQ,IAAIA,cAAc,KAAK,CAAC,CAApB,IAAyB5K,gBAA7B,EAA+C;MAC7C9G,OAAO,CAACgC,KAAD,CAAP,CAAe;QACbiL,SAAS,EAAE7J,WAAW,CAAC8J,IADV;QAEbC,MAAM,EAAE,8BAFK;QAGbC,MAAM,EAAE;UACN9E,oBAAoB,EAAEA,oBAAoB,CAACV,KADrC;UAEN/B,aAAa,EAAE6L;QAFT;MAHK,CAAf;MAQA1R,OAAO,CAAC8G,gBAAD,CAAP;IACD;EACF,CA5EgB,EA6EjB,CAACkG,cAAD,EAAiBlG,gBAAjB,CA7EiB,CAAnB;EAgFA;AACJ;AACA;AACA;AACA;;EACItH,SAAS,CAAC,MAAM;IACd,IAAIiJ,iBAAiB,CAACb,KAAtB,EAA6B;MAC3B2G,iBAAiB,CAAC7K,cAAD,CAAjB;IACD;EACF,CAJQ,EAIN,CACDA,cADC,EAED4E,oBAFC,EAGDG,iBAHC,EAID8F,iBAJC,CAJM,CAAT,CAh9C+B,CA09C/B;EAEA;;EACAvM,KAAK,CAAC;IACJiL,SAAS,EAAE7J,WAAW,CAAC8J,IADnB;IAEJC,MAAM,EAAE,QAFJ;IAGJC,MAAM,EAAE;MACNpF,kBAAkB,EAAEA,kBAAkB,CAACJ,KADjC;MAENU,oBAAoB,EAAEA,oBAAoB,CAACV,KAFrC;MAGNqK,aAAa,EAAEvO;IAHT;EAHJ,CAAD,CAAL;EASA,oBACE,oBAAC,mBAAD;IAAqB,KAAK,EAAE2L;EAA5B,gBACE,oBAAC,2BAAD;IAA6B,KAAK,EAAED;EAApC,gBACE,oBAAC,kCAAD;IACE,yBAAyB,EAAEvK;EAD7B,gBAGE,oBAAC,4BAAD;IACE,GAAG,EAAC,8BADN;IAEE,aAAa,EAAEgB,aAFjB;IAGE,gBAAgB,EAAEF,gBAHpB;IAIE,iBAAiB,EAAEyB;EAJrB,EAHF,eASE,oBAAC,oBAAD;IACE,GAAG,EAAC,sBADN;IAEE,qBAAqB,EAAE,CAACH,MAF1B;IAGE,eAAe,EAAEQ,wBAHnB;IAIE,eAAe,EAAEI,uBAJnB;IAKE,QAAQ,EAAEpC,QALZ;IAME,WAAW,EAAEC,WANf;IAOE,QAAQ,EAAEwB,QAPZ;IAQE,KAAK,EAAE5C;EART,gBAUE,oBAAC,QAAD,CAAU,IAAV;IAAe,KAAK,EAAED;EAAtB,gBACE,oBAAC,8BAAD;IACE,GAAG,EAAC,gCADN;IAEE,aAAa,EAAEwB,aAFjB;IAGE,gBAAgB,EAAEF,gBAHpB;IAIE,mBAAmB,EAAE0B,mBAJvB;IAKE,eAAe,EAAE7C;EALnB,EADF,eAQE,oBAAC,QAAD,CAAU,IAAV;IACE,aAAa,EAAC,UADhB;IAEE,KAAK,EAAE0L;EAFT,gBAIE,oBAAC,wBAAD;IACE,GAAG,EAAC,8BADN;IAEE,KAAK,EAAEL;EAFT,GAIG,OAAOrI,OAAP,KAAmB,UAAnB,gBAAgC,oBAAC,OAAD,OAAhC,GAA8CA,OAJjD,EAMGF,eAAe,iBACd,oBAAC,0BAAD;IACE,eAAe,EAAEA;EADnB,EAPJ,CAJF,CARF,eAyBE,oBAAC,0BAAD;IACE,GAAG,EAAC,4BADN;IAEE,aAAa,EAAEzB,aAFjB;IAGE,gBAAgB,EAAEF,gBAHpB;IAIE,YAAY,EAAEmC,oBAJhB;IAKE,0BAA0B,EAAE/D,0BAL9B;IAME,cAAc,EAAEC,cANlB;IAOE,oBAAoB,EAAEC,oBAPxB;IAQE,wBAAwB,EAAEC,wBAR5B;IASE,gBAAgB,EAAEY,gBATpB;IAUE,eAAe,EAAEqC,eAVnB;IAWE,WAAW,EAAEzC,oBAXf;IAYE,oBAAoB,EAAEE;EAZxB,EAzBF,CAVF,CATF,CADF,CADF,CADF;AA4FD,CAnkDoC,CAAvC;AAskDA,MAAMxB,WAAW,gBAAG7D,IAAI,CAAC4D,oBAAD,CAAxB;AACAC,WAAW,CAAC8O,WAAZ,GAA0B,aAA1B;AAEA,eAAe9O,WAAf"}